define(["jimu-core","jimu-ui","jimu-ui/setting-components","jimu-layouts/layout-builder","jimu-ui/style-setting-components"],(function(t,e,o,n,a){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=624)}({15:function(t,e){t.exports=n},18:function(t,e){t.exports=a},3:function(e,o){e.exports=t},4:function(t,o){t.exports=e},59:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(3),a=o(4);e.defaultConfig=n.Immutable({space:20,style:{padding:{number:[10],unit:a.UnitTypes.PIXEL}}}),e.DEFAULT_ROW_ITEM_SETTING={heightMode:"fixed",aspectRatio:1,offsetX:0,offsetY:0,style:{alignSelf:"flex-start"}}},624:function(t,e,o){"use strict";var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),s=o(7),u=o(4),r=o(15),l=o(59),p=o(18),d={width:"7.5rem"},f=[u.UnitTypes.PIXEL],y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateAlign=function(t){e.updateStyle("alignSelf",t.target.value)},e.updateHeight=function(t){var o=i.Immutable(e.props.layoutItem.bbox);e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o.set("height",""+Math.round(t.distance)+t.unit))},e.updateHeightMode=function(t){var o=e.props.layoutItem.setting||i.Immutable({}),n=t.target.value;if(o=o.set("heightMode",n),"ratio"===n){var a=e.getSizeOfItem();a&&(o=o.set("aspectRatio",Number((a.height/a.width).toFixed(2))))}e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o)},e.updateAutoSetting=function(t){var o,n=t===s.SizeMode.Auto,a=e.props.layoutItem.setting||i.Immutable({});a=a.setIn(["autoProps","height"],n);var u=i.Immutable(e.props.layoutItem.bbox),r=parseFloat(null===(o=u)||void 0===o?void 0:o.height);if(!n&&isNaN(r)){var l=e.getSizeOfItem();l&&e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},u.set("height",l.height))}e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},a)},e.updateAspectRatio=function(t){var o=e.props.layoutItem.setting||i.Immutable({});o=o.set("aspectRatio",t),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o)},e.updateOffsetX=function(t){var o=e.props.layoutItem.setting||i.Immutable({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o.set("offsetX",t))},e.updateOffsetY=function(t){var o=e.props.layoutItem.setting||i.Immutable({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o.set("offsetY",t))},e.formatMessage=function(t){return e.props.formatMessage(t)},e}return a(e,t),e.prototype.updateStyle=function(t,e){var o,n,a,s=this.props.layoutItem,u=i.Immutable(null!=(a=null===(n=null===(o=s)||void 0===o?void 0:o.setting)||void 0===n?void 0:n.style)?a:{});this.props.onSettingChange({layoutId:this.props.layoutId,layoutItemId:this.props.layoutItem.id},{style:u.set(t,e)})},e.prototype.getSizeOfItem=function(){var t=this.props,e=t.layoutId,o=t.layoutItem,n=this.querySelector('div.exb-rnd[data-layoutid="'+e+'"][data-layoutitemid="'+o.id+'"]');return n?n.getBoundingClientRect():null},e.prototype.querySelector=function(t){var e=document.querySelector('iframe[name="'+i.APP_FRAME_NAME_IN_BUILDER+'"]');return e?(e.contentDocument||e.contentWindow.document).querySelector(t):null},e.prototype.render=function(){var t,e,o,n=this.props,a=n.layoutId,y=n.layoutItem,g=n.isLockLayout;if(!y)return null;var c=i.lodash.assign({},l.DEFAULT_ROW_ITEM_SETTING,y.setting),m=y.bbox,h=c.style||{},I=null!=(e=null===(t=c.autoProps)||void 0===t?void 0:t.height)&&e,v="auto"!==c.heightMode?null!=(o=c.heightMode)?o:"fit":"fit";return i.jsx("div",{className:"row-item-setting"},!g&&i.jsx(i.React.Fragment,null,i.jsx(s.SettingSection,{title:this.formatMessage("size")},i.jsx(s.SettingRow,{label:i.jsx(u.Label,{check:!0,className:"justify-content-start align-items-center"},this.formatMessage("height"))},i.jsx(s.SizeModeSelector,{mode:I?s.SizeMode.Auto:s.SizeMode.Custom,onChange:this.updateAutoSetting},i.jsx(u.Select,{value:v,onChange:this.updateHeightMode,style:d,disabled:I},i.jsx("option",{value:"fit"},this.formatMessage("fitToContainer")),i.jsx("option",{value:"fixed"},this.formatMessage("fixed")),i.jsx("option",{value:"ratio"},this.formatMessage("aspectRatio"))))),"ratio"===v&&!I&&i.jsx(s.SettingRow,{label:this.formatMessage("aspectRatio")},i.jsx(p.InputRatio,{style:d,value:c.aspectRatio,onChange:this.updateAspectRatio})),"fixed"===v&&!I&&i.jsx(s.SettingRow,{label:this.formatMessage("height")},i.jsx(p.InputUnit,{style:d,units:f,value:{distance:Math.round(parseFloat(m.height)),unit:u.UnitTypes.PIXEL},onChange:this.updateHeight})),("fit"!==v||I)&&i.jsx(s.SettingRow,{label:this.formatMessage("align")},i.jsx(u.Select,{style:d,value:h.alignSelf||"flex-start",onChange:this.updateAlign},i.jsx("option",{value:"flex-start"},this.formatMessage("T")),i.jsx("option",{value:"flex-end"},this.formatMessage("B")),i.jsx("option",{value:"center"},this.formatMessage("center"))))),i.jsx(s.SettingSection,{title:this.formatMessage("position")},i.jsx(s.SettingRow,{label:this.formatMessage("offsetX")},i.jsx(u.NumericInput,{style:d,value:c.offsetX,onChange:this.updateOffsetX})),i.jsx(s.SettingRow,{label:this.formatMessage("offsetY")},i.jsx(u.NumericInput,{style:d,value:c.offsetY,onChange:this.updateOffsetY})))),(y.widgetId||y.sectionId)&&i.jsx(r.CommonLayoutItemSetting,{layoutId:a,layoutItemId:y.id,isSection:y.type===i.LayoutItemType.Section,style:this.props.style,onStyleChange:this.props.onStyleChange,formatMessage:this.props.formatMessage}))},e}(i.React.PureComponent);e.default=y},7:function(t,e){t.exports=o}})}));