"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[9976],{49976:(e,t,o)=>{o.r(t),o.d(t,{arcgis_report_list:()=>s});var r=o(87762),i=o(24482),n=o(34469);const s=class{constructor(e){(0,r.r)(this,e),this.reportSelected=(0,r.c)(this,"reportSelected",7),this._idPrefix="arcgis-report-list-",this._containerPrefix="arl-container-",this._accordionPrefix="acc-",this._itemPrefix="arl-item-",this._groupPrefix="arl-group-",this._hasSetEnv=!1,this.stSourceCountry="US",this._isInitialized=!1,this.stMultipleChoice=!1,i.D.showDebugConsoleLogs=!0,i.A._verbose=!0,this._groupId=i.a.generateId(this._groupPrefix).id,this.langCode="en-us",this.sourceCountry="US",this.stMultipleChoice=!1,i.B._initialize(this.langCode),this._instanceId=i.a.generateId(this._idPrefix).id,this._infographics={MyInfographics:{dataId:2,tag:"report-my-infographics",data:void 0,accordionId:i.a.generateId(this._instanceId+this._accordionPrefix).id},EsriInfographics:{dataId:3,tag:"report-esri-infographics",data:void 0,accordionId:i.a.generateId(this._instanceId+this._accordionPrefix).id},SharedInfographics:{dataId:4,tag:"report-shared-infographics",data:void 0,accordionId:i.a.generateId(this._instanceId+this._accordionPrefix).id}},this._onChangeQueue={}}queryElementById(e){return this.el.shadowRoot.querySelector(i.A.fixId(e))}onEnvChanged(){console.log("%carcgis-report-list environment: "+this.env,"color:green;font-size:14pt"),this.stEnv=this.env,i.E.setEnvironment(this.env)}onLangCodeChanged(){this.stLangCode=this.langCode,i.B._initialize(this.stLangCode)}onSourceCountryChanged(){this.stSourceCountry=this.sourceCountry}onColorsChanged(){this.stColors=JSON.parse(this.colors)}onAccordionCheckboxChanged(e){}async setColors(e){this.stColors=e}async initialize(e,t,o,r){const i=this;i.token=t,i.username=e,i.sourceCountry=o,i.langCode=r,(0,n.a)(e,t);try{const e=await(0,n.g)(o);e?(i._infographics.MyInfographics=e.user,i._infographics.EsriInfographics=e.public,i._infographics.SharedInfographics=e.shared):(i._infographics.MyInfographics=void 0,i._infographics.EsriInfographics=void 0,i._infographics.SharedInfographics=void 0),this._isInitialized=!0,setTimeout(i._updateLayout,0)}catch(e){console.log("%carcgis-report-list request for esri reports failed","color:red",e)}document.addEventListener("accordionItemsChecked",i.onReportChecked),document.addEventListener("accordionItemClicked",(e=>{i.onReportClicked.call(i,e)}))}async setMultipleChoice(e){this.stMultipleChoice=e}async _updateLayout(){let e=i.A.queryElement.call(this,"div");e&&(e.style.border="none !important");let t=i.A.queryElementAll.call(this,"ba-accordion");t&&t.length>0&&t.forEach((e=>{e._updateLayout()}))}async onPropChange(e,t){this._onChangeCallback={fn:e,ctx:t}}_debounce2(e,t){const o=this;o._debounceTimer&&clearTimeout(o._debounceTimer),o._debounceTimer=setTimeout((function(){o._debounceTimer=null,e.apply(o)}),t)}_onFilteredPropChanged(){this._onChangeCallback&&this._onChangeCallback.fn(this._onChangeCallback.ctx,this._onChangeQueue),this._onChangeQueue={}}_onPropChanged(e,t){this._onChangeQueue[e]=t,this._debounce2(this._onFilteredPropChanged,250)}onReportChecked(){}onReportClicked(e){let t=e.detail.item.id;console.log("REPORT CLICKED  ",t,e.detail.item.name),this.setReportId(t,e.detail.item.name)}setReportId(e,t){this.selectedReportId=e,this.reportSelected.emit({id:this.selectedReportId,name:t}),this._onPropChanged("reportId",this.selectedReportId)}async componentWillLoad(){this.stColors=this.colors,!this._hasSetEnv&&this.env&&(this._hasSetEnv=!0,this.stEnv=this.env,i.E.setEnvironment(this.env))}componentDidLoad(){const e=this;i.A.hasText(this.colors)&&(this.stColors=i.A.parseThemeString(this.colors)),e.stColors&&(e.el.style.setProperty("--calcite-ui-brand",e.stColors.brand),e.el.style.setProperty("--calcite-ui-foreground-1",e.stColors.foreground1),e.el.style.setProperty("--calcite-ui-foreground-2",e.stColors.foreground2),e.el.style.setProperty("--calcite-ui-foreground-3",e.stColors.foreground2),e.el.style.setProperty("--calcite-ui-text-1",e.stColors.text1),e.el.style.setProperty("--calcite-ui-text-2",e.stColors.text2),e.el.style.setProperty("--calcite-ui-text-3",e.stColors.text3),e.el.style.setProperty("--calcite-ui-border-2",e.stColors.border2),e.el.style.setProperty("--calcite-accordion-item-background",e.stColors.accordionBackground),e.el.style.setProperty("--calcite-accordion-item-foreground",e.stColors.accordionForeground))}render(){if(!this._isInitialized)return;const e=this;return(0,r.h)("div",null,e.renderList("MyInfographics"),e.renderList("EsriInfographics"),e.renderList("SharedInfographics"))}renderList(e){const t=this.stMultipleChoice.toString(),o={MyInfographics:"report-my-infographics",EsriInfographics:"report-esri-infographics",SharedInfographics:"report-shared-infographics"},n=this._infographics[e];if(n&&n.length>0){let s=[];if("true"==t&&n.length>4){let t={id:-1,name:i.B.i18n("dropdown-all"),icon:"file-text",usesCheckbox:!0,isChecked:"EsriInfographics"==e};s.push(t)}n.forEach((function(o){let r={id:o.id,name:o.title,icon:"file-text"};"true"==t&&(r.usesCheckbox=!0,r.isChecked="EsriInfographics"==e),s.push(r)}));const a=s.length.toString(),c=JSON.stringify(s),l=i.B.i18n(o[e],a);return(0,r.h)("ba-accordion",{id:n.accordionId,class:"reportList",displayname:l,content:c})}return""}get el(){return(0,r.g)(this)}static get watchers(){return{env:["onEnvChanged"],langCode:["onLangCodeChanged"],sourceCountry:["onSourceCountryChanged"],colors:["onColorsChanged"]}}};s.style=':host{display:block}calcite-tree-item{font-size:14.5pt;color:#333;font-family:Arial, Helvetica, sans-serif}.notReadyOuter{position:absolute;top:0;left:0;width:100%;height:100%}.notReadyDiv{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);width:100px;height:100px}.notReadySvg{position:absolute;top:calc(50% - 29px);left:calc(50% - 33px)}.arcgisReportsTreeItem{background-color:white;color:#585859;font-size:13pt;min-height:33px;border-bottom:solid 1px lightgray}.arcgisReportsTreeItemIcon{margin-top:-3px;margin-right:6px}calcite-tree-item[aria-selected="true"]{background-color:#f6f6f6 !important}calcite-tab-title[aria-expanded="true"]{background-color:#4991df;color:whitesmoke;font-size:11.5pt;margin:4px 0 1px 4px;min-width:calc(50% - 17px);border:solid 1px #4991df;border-top-left-radius:4px;border-bottom-left-radius:4px}calcite-tab-title[aria-expanded="false"]{background-color:white;color:#4590e1;font-size:11.5pt;margin:4px 4px 1px 0;min-width:calc(50% - 17px);border:solid 1px #4991df;border-top-right-radius:4px;border-bottom-right-radius:4px}.arcgisReportsTreeDiv{width:100%;max-height:500px;overflow:scroll}.ba-dark{background-color:#2b2b2b !important;color:#fefefe !important}.ba-dark-item{background-color:#464646 !important;color:#fefefe !important}.ba-dark-item-selected{background-color:#363636 !important;color:#fefefe !important}'},34469:(e,t,o)=>{o.d(t,{a:()=>i,g:()=>s,s:()=>n});var r=o(24482);function i(e,t){try{return null!=e&&e.length>0?null!=t&&t.length>0?(r.T.setToken(e,t),r.B.i18n("ok")):r.B.i18n("invalid-token"):r.B.i18n("invalid-username")}catch(e){return e}}function n(e){try{return null!=e&&e.length>0?(r.S.setEnvironment(e),r.B.i18n("ok")):r.B.i18n("invalid-environment")}catch(e){return e}}function s(e,t){return void 0===t&&(t=!1),o=this,i=void 0,s=function(){return function(e,t){var o,r,i,n,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}}(this,(function(o){switch(o.label){case 0:return[4,r.G.getInfographicTemplatesList(e,t)];case 1:return[2,o.sent()]}}))},new((n=void 0)||(n=Promise))((function(e,t){function r(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(e){e(o)}))).then(r,a)}c((s=s.apply(o,i||[])).next())}));var o,i,n,s}}}]);