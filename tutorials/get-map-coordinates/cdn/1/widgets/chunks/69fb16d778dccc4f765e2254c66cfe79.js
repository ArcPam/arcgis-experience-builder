"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[4482],{24482:(e,t,r)=>{r.d(t,{A:()=>y,B:()=>m,D:()=>w,E:()=>a,G:()=>g,S:()=>u,T:()=>n,U:()=>o,a:()=>b});var n=function(){function e(){}return e.getToken=function(){return new Promise((function(t){t(e.token.access_token)}))},e.setToken=function(e,t){e&&e.length>0&&t&&t.length>0&&(this.token.access_token=t,this.token.username=e)},e.token={access_token:"",expires_in:null,persist:"true",ssl:"true",username:"mark_ba"},e}(),o=function(){function e(){}return e.hasText=function(e){return!(null==e)&&"string"==typeof e&&e.length>0&&e.trim().length>0},e.fixId=function(e){return!e||e.length<=0?"":"#"===e[0]?e:"#"+e},e.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},e}(),a=function(){function e(){}return e.setEnvironment=function(t){var r="prod"===t||"localhost"===t?"www":t;e._env=r,console.log("%cBA Environment: "+r,"color:green;font-size:9pt")},e.getEnvironment=function(){return e._env},e.getPortalBase=function(){var t=e._env;if(!t)return"";var r="https://"+("dev"===t?"devext":"qa"===t?"qaext":"www")+".arcgis.com";return console.log("BA Environments base="+r),r},e.getUrl=function(t){if(!e._env)return console.log("%cEnvironments error: env not set","color:red"),"";if(!t||!o.hasText(t))return console.log("%cEnvironments error: invalid subdomain","color:red"),"";var r=e.getPortalBase();if(""===r)return"";try{var n="";switch(t){case"geocode":n="https://www.arcgis.com"===r?"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer":"https://qaext.arcgis.com"===r?"https://geocodeqa.arcgis.com/arcgis/rest/services/World/GeocodeServer":"https://devext.arcgis.com"===r?"https://geocodedev.arcgis.com/arcgis/rest/services/World/GeocodeServer":"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer";break;case"arcgis":n=r;break;case"infographics":n="https://www.arcgis.com"===r?"https://bao.arcgis.com/InfographicsPlayer/BAMobile/10.2/reportPlayer/ReportPlayerMobile.html":"https://qaext.arcgis.com"===r?"https://baoqa.arcgis.com/InfographicsPlayer/BAMobile/10.2/reportPlayer/ReportPlayerMobile.html":"https://devext.arcgis.com"===r?"https://baodev.arcgis.com/InfographicsPlayer/BAMobile/10.2/reportPlayer/ReportPlayerMobile.html":"https://bao.arcgis.com/InfographicsPlayer/BAMobile/10.2/reportPlayer/ReportPlayerMobile.html";break;case"geoenrich":n="https://www.arcgis.com"===r?"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver/Geoenrichment/Enrich":"https://qaext.arcgis.com"===r?"https://geoenrichqa.arcgis.com/arcgis/rest/services/World/geoenrichmentserver/Geoenrichment/Enrich":"https://devext.arcgis.com"===r?"https://geoenrichdev.arcgis.com/arcgis/rest/services/World/geoenrichmentserver/Geoenrichment/Enrich":"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver/Geoenrichment/Enrich"}return n}catch(e){console.log("%cEnvironments.getUrl() error ","color:red",e)}return""},e._env="www",e}(),i=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))},s=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},c=function(){function e(){}return e.executeSelf=function(){return new Promise((function(t,r){n.getToken().then((function(n){n===e._lastSelfToken?t(e._selfResult):e.executeRequest({taskPath:"/portals/self",data:{culture:"en-us"}}).then((function(r){e._lastSelfToken=n,e._selfResult=r,t(r)})).catch((function(t){e._lastSelfToken="",e._selfResult="",r(t)}))})).catch((function(e){return r(e)}))}))},e.getGeoenrichmentUrl=function(){return e.getHelperServiceUrl("geoenrichment")},e.getHelperServiceUrl=function(t){return new Promise((function(r,n){e.executeSelf().then((function(e){var o=e.helperServices;if(o){var a=o[t];if(a){var i=Array.isArray(a)?a[0].url:a.url;i?r(i):n(t+" helper service is not configured.")}else n(t+" helper service is not configured.")}else n("Helper services are not configured.")})).catch((function(e){return n(e)}))}))},e.getPortalResource=function(t){return e.executeRequest({taskPath:"/portals/self/resources/"+t})},e.getItemData=function(t){return e.executeRequest({taskPath:"/content/items/"+t+"/data"})},e.searchAllItems=function(e,t){var r=this;return new Promise((function(n,o){var a=[],i=r,s=function(e,t,r){i.searchItems(e,t,r).then((function(r){r.items.length&&(a=a.concat(r.items));var o=r.context;o.nextStart>0?s(e,t,o):n(a)}),(function(e){a&&a.length?n(a):o(e)}))};s(e,t,null)}))},e.searchItems=function(t,r,n){return new Promise((function(o,a){var i=r?JSON.parse(JSON.stringify(r)):{};if(n){i.q=n.query;var s=n.total,c=n.nextStart;s&&c&&(c>0&&s>=c?i.start=c:o({items:[],context:n})),n.sortField&&n.sortOrder&&(i.sortOrder=n.sortOrder,i.sortField=n.sortField)}else{var l=[];Object.getOwnPropertyNames(t).forEach((function(e){l.push(e+':"'+t[e]+'"')})),l.length&&(i.q=l.join(" AND "))}e.portalSearch(i).then((function(e){var t=e.results,r={query:e.query,total:e.total,nextStart:e.nextStart,sortOrder:null,sortField:null};i.sortOrder&&i.sortField&&(r.sortOrder=i.sortOrder,r.sortField=i.sortField),o({items:t,context:r})})).catch(a)}))},e.portalSearch=function(t){return e.executeRequest({taskPath:"/search",data:t})},e.getPortalUrl=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){return[2,a.getUrl("arcgis")+"/sharing/rest"]}))}))},e.executeRequest=function(t){var r=this;return new Promise((function(o,a){n.getToken().then((function(n){return i(r,void 0,void 0,(function(){var r,i,c;return s(this,(function(s){switch(s.label){case 0:for(i in t.data||(t.data={}),t.data.f||(t.data.f="json"),t.data.token=n,t.data.langCode="en-us",r=new FormData,t.data)r.append(i,t.data[i]);return Object.prototype.hasOwnProperty.call(t,"url")?(c=t.url,[3,3]):[3,1];case 1:return[4,e.getPortalUrl()];case 2:c=s.sent(),s.label=3;case 3:return t.taskPath&&(c+=t.taskPath),fetch(c,{method:"POST",body:r}).then((function(e){if(!e.ok)throw new Error("Network response ended with error.");return"bin"===t.data.f?e.blob():e.json()})).then((function(e){e.error?a(e.error):o(e)})).catch((function(e){console.error("Error:",e),a(e)})),[2]}}))}))})).catch((function(e){return a(e)}))}))},e}(),l=function(){function e(){}return e.getBusinessAnalystOrganizationalSettings=function(){return c.getPortalResource("BusinessAnalyst_Organizational_Settings.json")},e.getDisabledReports=function(){return new Promise((function(t){var r=function(e){t({}),console.log(e)};c.executeSelf().then((function(n){var o=n.user.roleId||n.user.role;e.getBusinessAnalystOrganizationalSettings().then((function(e){var r=e["userRoles.disabledAreas.reports"];r&&r[o]?t(r[o]):t({})})).catch(r)})).catch(r)}))},e.getUserGalleryInfographicReportIds=function(){return new Promise((function(t,r){e._searchGalleryInfographicPreferencesItem().then((function(e){if(e){var n=e.id;c.getItemData(n).then((function(e){t(e&&e.data&&e.data.myGalleryInfographicReportIds)})).catch((function(e){return r(e)}))}else r(null)})).catch((function(e){return r(e)}))}))},e._searchGalleryInfographicPreferencesItem=function(){return e._searchUserItem("esriFavoriteReportTemplates")},e._searchUserItem=function(e){return new Promise((function(t,r){c.executeSelf().then((function(n){var o=n.user.username,a={type:"Web Mapping Application",typekeywords:e,owner:o};c.searchItems(a,{num:1},void 0).then((function(e){t(e&&e.length&&e[0])})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}))}))},e}(),u=function(){function e(){}return e.getEnvironment=function(){return new Promise((function(e){e(a.getEnvironment())}))},e.setEnvironment=function(e){e&&e.length>0?a.setEnvironment(e):console.log("%cba-reports error: setEnvironment() invalid arg","color:red")},e.getPortalBaseUrl=function(){return e=this,t=void 0,n=function(){return function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(e){return[2,a.getUrl("arcgis")]}))},new((r=void 0)||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}));var e,t,r,n},e.isTrueString=function(e){return"true"===String(e).toLowerCase()},e}(),f=function(){function e(){}return e._condenseResultsArray=function(e){var t=e.map((function(e){return{id:e.id,title:e.title}})),r=t.map((function(e){return e.title}));return t.filter((function(e,t){return r.indexOf(e.title)==t}))},e.getReportTemplates=function(t,r){return void 0===r&&(r=!1),new Promise((function(n,o){var a={ge:void 0,shared:void 0,user:void 0,favoriteIds:void 0};c.executeSelf().then((function(i){var s=i.user.username;Promise.allSettled([e._getSharedCustomReportTemplateItems(s),e._getMyCustomReportTemplateItems(s),e._getFavoriteReportsIds(s,t)]).then((function(i){a.ge=i[0].value?i[0].value:[],a.shared=e._createReportTemplateInfos(i[1]&&i[1].value?i[1].value:[],t),a.user=e._createReportTemplateInfos(i[2]&&i[2].value?i[2].value:[],t),a.favoriteIds=i[3]&&i[3].value?i[3].value:[],l.getDisabledReports().then((function(t){var o=a.ge,i=a.shared;null!=o&&(a.ge=o.filter((function(e){return!t[e.reportID]})),null!=i&&(a.shared=i.filter((function(e){return!t[e.reportID.itemid]})))),r||(a.ge=e._condenseResultsArray(a.ge),a.shared=e._condenseResultsArray(a.shared),a.user=e._condenseResultsArray(a.user),a.favoriteIds=e._condenseResultsArray(a.favoriteIds)),n(a)})).catch((function(e){return o(e)}))}))})).catch((function(e){return o(e)}))}))},e._getGEReportTemplates=function(t){return new Promise((function(r,n){var o=e._geReportTemplatesCache[t];o?r(o):g.execute({taskPath:"/GeoEnrichment/Reports/"+t}).then((function(n){var o=n.reports;e._geReportTemplatesCache[t]=o,r(o)})).catch(n)}))},e._getSharedCustomReportTemplateItems=function(t){var r='type:"Report Template" (access:shared OR access:org) typekeywords:(esriWebReport NOT esriWebInfographicReport) NOT owner:'+t;return e._searchItems(r,e._removeInfographicTemplates)},e._getMyCustomReportTemplateItems=function(t){var r='type:"Report Template" typekeywords:(esriWebReport NOT esriWebInfographicReport) owner:'+t;return e._searchItems(r,e._removeInfographicTemplates)},e._removeInfographicTemplates=function(e){return!u.isTrueString(e.properties.isGraphicReport)},e.getInfographicReportTemplateItems=function(t,r){return void 0===r&&(r=!1),new Promise((function(n,o){var a={public:void 0,shared:void 0,user:void 0,favoriteIds:void 0};c.executeSelf().then((function(i){var s=i.user.username,c=i.user.orgId;Promise.allSettled([e._getEsriInfographicReportTemplateItems(),e._getSharedInfographicReportTemplateItems(s,c),e._getUserInfographicReportTemplateItems(s),e._getFavoriteReportsIds(s,t)]).then((function(i){var s=e._byCountry(t);a.public=i[0].value?i[0].value.filter(s):[],a.shared=i[1].value?i[1].value.filter(s):[],a.user=i[2].value?i[2].value.filter(s):[],a.favoriteIds=i[3].value?i[3].value:[];var c=a.user;null!=c&&c.sort((function(e,t){return e.title.localeCompare(t.title)})),l.getDisabledReports().then((function(t){var o=function(e){return!t[e.id]},i=a.public;null!=i&&(a.public=i.filter(o));var s=a.shared;null!=s&&(a.shared=s.filter(o)),r||(a.public=e._condenseResultsArray(a.public),a.shared=e._condenseResultsArray(a.shared),a.user=e._condenseResultsArray(a.user),a.favoriteIds=e._condenseResultsArray(a.favoriteIds)),n(a)})).catch((function(e){return o(e)}))}))})).catch((function(e){return o(e)}))}))},e._byCountry=function(e){return function(t){var r=t&&t.properties&&t.properties.countries.toLowerCase();return r&&r.indexOf(e.toLowerCase())>=0}},e._getEsriInfographicReportTemplateItems=function(){return e._searchItems('type:"Report Template" typekeywords:esriWebStandardInfographicReport owner:esri_reports',e._infographicFilter)},e._getSharedInfographicReportTemplateItems=function(t,r){var n='type:"Report Template" (access:shared OR access:org OR (access:public AND orgid:'+r+"))  typekeywords:esriWebInfographicReport  NOT owner:"+t;return e._searchItems(n,e._infographicFilter)},e._getUserInfographicReportTemplateItems=function(t){return new Promise((function(r,n){var o='type:"Report Template" typekeywords:esriWebInfographicReport  owner:'+t,a=e._searchItems(o,e._infographicFilter),i=e._getUserGalleryInfographicReportTemplateItems();Promise.allSettled([a,i]).then((function(e){var t=e[0].value?e[0].value:[],n=e[1].value?e[1].value:[];r(t.concat(n))}),(function(e){n(e)}))}))},e._getFavoriteReportsIds=function(t,r){return new Promise((function(n,o){var a='type:"Web Mapping Application" typekeywords:"BAUserData.FavoriteReports" owner:'+t;e._searchItems(a,null).then((function(e){var t=e&&e[0];t?c.getItemData(t.id).then((function(e){if(e){var t=e.data&&e.data["favorites"+r];if(t){var o=t.map((function(e){return e.reportID}));n(o)}else n([])}else n([])})).catch((function(e){return o(e)})):n([])})).catch((function(e){return o(e)}))}))},e._getUserGalleryInfographicReportTemplateItems=function(){return new Promise((function(t,r){l.getUserGalleryInfographicReportIds().then((function(n){if(n&&n.length){var o=n.map((function(e){return"id:"+e})).join(" OR ");e._searchItems(o,e._infographicFilter).then((function(e){t(e)})).catch((function(e){return r(e)}))}else t([])})).catch((function(e){return r(e)}))}))},e._searchItems=function(e,t){return new Promise((function(r,n){var o={start:1,num:1e3,sortField:"title",sortOrder:"asc",q:e};c.searchAllItems({},o).then((function(e){var n=t?e.filter(t):e;r(n)})).catch((function(e){return n(e)}))}))},e._createReportTemplateInfos=function(e,t){var r=[];return e.forEach((function(e){var n=e.properties;if(n){var o=n.countries;if(u.isTrueString(n.isComparisonReport))return;if(o&&-1!==o.indexOf(t)){var a={reportID:{itemid:e.id},formats:n.formats&&n.formats.split(","),headers:[],metadata:{author:n.author,categories:[],countries:o,coverage:n.coverage,hierarchy:n.hierarchy,keywords:n.keywords,owner:e.owner,title:e.title,type:n.type}};r.push(a)}}})),r},e._infographicFilter=function(e){var t=e.properties;return u.isTrueString(t.isGraphicReport)&&!u.isTrueString(t.isSingleInfographic)&&!u.isTrueString(t.isHidden)&&!u.isTrueString(t.isBlank)},e._geReportTemplatesCache={},e}(),h=function(){function e(){}return e.hasText=function(e){return!(null==e)&&"string"==typeof e&&e.length>0&&e.trim().length>0},e.fixId=function(e){return!e||e.length<=0?"":"#"===e[0]?e:"#"+e},e.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},e}(),p=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))},d=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},g=function(){function e(){}return e.getInfographicTemplatesList=function(e,t){return void 0===t&&(t=!1),p(this,void 0,void 0,(function(){return d(this,(function(r){switch(r.label){case 0:return[4,f.getInfographicReportTemplateItems(e||"US",t)];case 1:return[2,r.sent()]}}))}))},e.getClassicReportsTemplatesList=function(e,t){return void 0===t&&(t=!1),p(this,void 0,void 0,(function(){return d(this,(function(r){switch(r.label){case 0:return[4,f.getReportTemplates(e||"US",t)];case 1:return[2,r.sent()]}}))}))},e.execute=function(e){return new Promise((function(t,r){c.getGeoenrichmentUrl().then((function(n){var o=e?JSON.parse(JSON.stringify(e)):{};o.data||(o.data={}),o.data.forStorage=!1,c.executeRequest({url:n+o.taskPath,data:o.data}).then(t).catch(r)})).catch(r)}))},e.createReport=function(e){return new Promise((function(t,r){c.getGeoenrichmentUrl().then((function(n){var o=n.toString()+"/GeoEnrichment/CreateReport";c.executeRequest({url:o,data:e}).then(t).catch(r)})).catch(r)}))},e.searchStdGeography=function(e,t){var r=this;return new Promise((function(n,o){if(e&&e.length){var a={geographyQuery:e,featureLimit:(null==t?void 0:t.featureLimit)||10,geographyLayers:(null==t?void 0:t.geographyLayers)||["US.States","US.Counties","US.Places"],useFuzzySearch:null==t?void 0:t.useFuzzySearch,sourceCountry:(null==t?void 0:t.sourceCountry)||"US",optionalCountryHierarchy:(null==t?void 0:t.optionalCountryHierarchy)||"census"};r.standardGeographyQuery(a).then((function(e){return n(e)})).catch((function(e){return o(e)}))}else n([])}))},e.requestStdGeography=function(e,t,r){var n=this;return new Promise((function(o,a){var i={geographyLayers:[e],featureLimit:(null==r?void 0:r.featureLimit)||1,returnGeometry:null==r?void 0:r.returnGeometry,generalizationLevel:(null==r?void 0:r.generalizationLevel)||0,geographyIDs:[t],sourceCountry:(null==r?void 0:r.sourceCountry)||"US",optionalCountryHierarchy:(null==r?void 0:r.optionalCountryHierarchy)||"census"};n.standardGeographyQuery(i).then((function(e){return o(e)})).catch((function(e){return a(e)}))}))},e.standardGeographyQuery=function(t){return new Promise((function(r,n){var o={data:t,taskPath:"/StandardGeographyQuery/execute"};e.execute(o).then((function(e){var t=e&&e.results&&e.results.length&&e.results[0],o=t&&t.value&&t.value.features;if(o)r(o);else{var a=e&&e.messages&&e.messages.length;n(a)}})).catch((function(e){n(e)}))}))},e.getStoredDefaultHierarchy=function(t){var r;if(window.localStorage){var n=localStorage.getItem(e._defaultHierarchyStorageName);if(n&&h.hasText(n)){var o=JSON.parse(n);r=o[t],e._defaultHierarchies=o}}return r},e.setStoredDefaultHierarchy=function(t,r){try{e.getStoredDefaultHierarchy(t),e._defaultHierarchies||(e._defaultHierarchies={}),e._defaultHierarchies[t]=r,window.localStorage&&localStorage.setItem(e._defaultHierarchyStorageName,JSON.stringify(e._defaultHierarchies))}catch(e){console.log(e)}},e.getGEDefaultHierarchy=function(t){return new Promise((function(r,n){var o="US";t&&h.hasText(t)&&(o=t);var a=e.getStoredDefaultHierarchy(o);a&&h.hasText(a)&&r(a),c.getGeoenrichmentUrl().then((function(a){var i=a.toString()+"/Geoenrichment/Countries/"+t+"?f=pjson";c.executeRequest({url:i,data:{}}).then((function(t){var n="US",a=t.hierarchies;if(a&&a.length>0)for(var i=0;i<a.length;i++){var s=a[i];if(s.default){n=s.ID,e.setStoredDefaultHierarchy(o,s.ID);break}}r(n)})).catch(n)})).catch(n)}))},e.getStandardGeographyLevels=function(t){return new Promise((function(r,n){t&&h.hasText(t)||(t="US"),e.getGEDefaultHierarchy(t).then((function(e){c.getGeoenrichmentUrl().then((function(o){var a=o.toString()+"/Geoenrichment/StandardGeographyLevels/"+t+"?f=pjson";c.executeRequest({url:a,data:{}}).then((function(t){var n;if(t&&t.geographyLevels&&t.geographyLevels[0]&&t.geographyLevels[0].hierarchies){for(var o=t.geographyLevels[0].hierarchies,a=0;a<o.length;a++)if(o[a].ID==e){n=o[a];break}n||(n=o[0])}r(n)})).catch(n)})).catch(n)}))})).catch((function(e){console.log(e)}))},e._defaultHierarchyStorageName="GEClient-default-hierarchy",e.enrich=function(e){var t=this;return new Promise((function(r,n){return p(t,void 0,void 0,(function(){var t;return d(this,(function(o){return t=a.getUrl("geoenrich"),e.forStorage=!1,c.executeRequest({url:t,data:e}).then((function(e){var t=e&&e.results&&e.results.length&&e.results[0],o=t&&t.value&&t.value.FeatureSet&&t.value.FeatureSet.length&&t.value.FeatureSet[0];if(o.features&&o.features.length)r(e);else{var a=e&&e.messages&&e.messages.length&&e.messages[0].description;a||(a="getfacts-no-data"),n(a)}}),(function(e){n(e)})),[2]}))}))}))},e}();const v={"@metadata":{locale:"en-us"},ok:"ok","invalid-token":"invalid token","invalid-username":"invalid username","invalid-environment":"invalid environment","find-address-or-place":"Find address or place","address-location-or-place":"Address, Location, or Place","boundary-name":"Administrative Boundaries","enter-address-loc-or-place":"Enter address, location, or place","enter-boundary-name":"Enter boundary name","network-response-error":"Network response indicated error occurred","show-search":"Display search in map widget","search-placeholder":"Enter address, location or place","search-label":"Search","search-placeholder-short":"Address, location or place","search-enter-boundary":"Enter boundary name or code","search-boundary":"Boundary name or code",searching:"Searching...","report-favorites":"Favorites [%%]","report-my-infographics":"My Infographics [%%]","report-esri-infographics":"Esri Infographics [%%]","report-shared-infographics":"Shared Infographics [%%]","search-results-empty":"Nothing Found","dropdown-all":"All","all-placeholder":"Enter location or boundary","report-classic-list":"Classic Reports","report-classic-fav":"Favorites","report-classic-esri":"Esri","report-classic-shared":"Shared","report-classic-user":"My Reports"};var m=function(){function e(){}return e._initialize=function(t){if(t&&t.length>0)e._locale=t.toLowerCase();else{if(e._locale&&e._locale.length>0&&e._locales[e._defaultLocale])return;navigator&&(navigator.languages&&navigator.languages.length>0?e._locale=navigator.languages[0].toLowerCase():navigator.language&&(e._locale=navigator.language.toLowerCase()))}(!e._locale||e._locale.length<=0)&&(e._locale="en-us"),e._locales["en-us"]=v},e.i18n=function(t,r){var n=e._locale||e._defaultLocale,a=e._locales[n];return a?a[t].indexOf("[%%]")>=0?null!=typeof r&&o.hasText(r)?a[t].replace("%%",r):a[t].replace("[%%]",""):a[t]:(console.log("i18n string not found: "+t),"??")},e._defaultLocale="en-us",e._locale=e._defaultLocale,e._locales={},e}();class y{static notDef(e){return null==e}static isDef(e){return!y.notDef(e)}static hasText(e){return y.isDef(e)&&"string"==typeof e&&e.length>0&&e.trim().length>0}static getKeys(e){var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(t);return r}static isNumber(e){return!isNaN(parseFloat(e))&&!isNaN(e-0)}static _hasProperty(e,t){return y.hasText(e[t])}static fixId(e){return!e||e.length<=0?"":"#"===e[0]?e:"#"+e}static applyCss(e,t){if(!e||!t)return;const r=this;function n(t){if(t&&t.style)for(let r=0;r<e.length;r++)t.style?t.style[e[r][0]]=e[r][1]:y._verbose&&console.log("%cWarn: missing style for ",y.flagText,t)}let o=[];if(t&&t.id){let e=y.queryElementById.call(r,t.id);e&&o.push(e)}else if(t.selector){let e=y.queryElementAll.call(r,t.selector);e&&e.length>0&&(t.subSelector?e.forEach((e=>{let n=y.queryElementAll.call(r,t.subSelector,e);o.push(n)})):o.push(e))}t.isClassname?o.forEach((t=>{let r=e[0][0];t.classList.contains(r)||t.classList.toggle(r)})):o.forEach((e=>{if(NodeList.prototype.isPrototypeOf(e))for(let t=0;t<e.length;t++)n(e[t]);else n(e)}))}static getShadowRoot(e){let t;return e&&(e.shadowRoot?t=e.shadowRoot:e.el&&e.el.shadowRoot&&(t=e.el.shadowRoot)),t||y._rootCounter++,t}static queryElement(e,t){let r,n;const o=y.getShadowRoot(this);function a(){let t;return o&&(t=o.querySelector(e)),t||(t=document.querySelector(e)),t}return t?(n=y.getShadowRoot(t),n&&(r=n.querySelector(e)),r||(r=a())):r=a(),r||void 0}static queryElementAll(e,t){let r,n;const o=y.getShadowRoot(this);function a(){let t;return o&&(t=o.querySelectorAll(e)),t||(t=document.querySelectorAll(e)),t}return t?(n=y.getShadowRoot(t),n&&(r=n.querySelectorAll(e)),r||(r=a())):r=a(),r||void 0}static queryElementById(e){return y.queryElement.call(this,y.fixId(e))}static parseThemeString(e){return this.hasText(e)?JSON.parse(e):{}}static parseBufferSizes(e){if(null==typeof e)return[1];let t=[];try{if(!this.hasText(e))return[1];{let r=e.split(",");for(let e=0;e<r.length;e++){if(e>=3)continue;let n=parseFloat(r[e]);t.push(n)}}}catch(e){return console.log(e),[1]}return t}}y._verbose=!1,y._rootCounter=0,y.noteStyle="background-color:#e1ebd4;color:#222;padding:3px;border-radius:2px;",y.errorStyle="background-color:red;color:white;padding:4px;border-radius:3px",y.grayStyle="background-color:#7890ad;color:#444;padding:3px;border-radius:2px;",y.flagStyle="background-color:yellow;color:#000;padding:5px;border-radius:2px;",y.blueStyle="background-color:blue;color:#eee;padding:1px 5px;border-radius:2px;",y.flagText="color:yellow;",y.blueText="color:#4d88ff;",y.greenText="color:#277711;";class w{constructor(){this.fixForLint=""}static log(e,...t){if(w.showDebugConsoleLogs&&(console.log("=======>"+e+": "),t&&t.length))for(let e=0;e<t.length;e++)console.log("...",t[e])}static logc(e){console.log("%c"+e,"color:yellow;font-size:9pt;")}}w.showDebugConsoleLogs=!1;var b=function(){function e(){}return e.generateId=function(t){if(t&&t.trim().length>0){e.prefixes[t]||(e.prefixes[t]=0);var r=e.prefixes[t]++;return{counter:r,id:t+r.toString()}}throw"ElementIds: generateId passed invalid prefix="+t.toString()},e.hasPrefix=function(e,t){return!(!e||!t||e.length<=0||t.length<=0)&&e.slice(0,t.length)==t},e.prefixes={},e}()}}]);