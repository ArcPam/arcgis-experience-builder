"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([[2616],{42616:(e,t,o)=>{o.r(t),o.d(t,{arcgis_ba_search:()=>r,ba_accordion:()=>c});var i=o(87762),s=o(24482),n=function(){function e(e,t){this.token=e,this.geocoderUrl=t||s.E.getUrl("geocode"),this.geocoderUrl.endsWith("/")||(this.geocoderUrl+="/")}return e.prototype.suggest=function(e,t){var o=this;return new Promise((function(i,s){if(e&&e.length){var n=new URLSearchParams({text:e});(null==t?void 0:t.location)&&n.set("location",t.location),o._request(o.geocoderUrl+"suggest",n).then((function(e){i(e.suggestions)})).catch((function(e){s(e)}))}else i([])}))},e.prototype.geocode=function(e,t){var o=this;return new Promise((function(i,s){if(e&&e.length){var n=new URLSearchParams({maxLocations:(null==t?void 0:t.maxLocations)||10,singleLine:e});(null==t?void 0:t.location)&&n.set("location",t.location),(null==t?void 0:t.outFields)&&n.set("outFields",t.outFields),(null==t?void 0:t.magicKey)&&n.set("magicKey",t.magicKey),o._request(o.geocoderUrl+"findAddressCandidates",n).then((function(e){i(e)})).catch((function(e){s(e)}))}else i([])}))},e.prototype._request=function(e,t){var o=this;return new Promise((function(i,n){t.set("token",o.token),t.set("f","json");var r=e+"?"+t.toString();fetch(r,{method:"GET"}).then((function(e){if(!e.ok)throw new Error(s.B.i18n("network-response-error"));return e.json()})).then((function(e){e.error?n(e.error):i(e)})).catch((function(e){n(e)}))}))},e}();const r=class{constructor(e){(0,i.r)(this,e),this.searchResults=(0,i.c)(this,"searchResults",6),this.searchCleared=(0,i.c)(this,"searchCleared",7),this.geocoderClient=n,this.baSearchKeyTimer=null,this.suggestionTimer=null,this._lastInputValue="",this._openFirst=!1,this._hasSetEnv=!1,this._idPrefix="arcgis-ba-search-",this._idPrefixInput="ba-search-input-",this._idPrefixDropDown="ba-search-drop-",this._idPrefixDropLoc="ba-search-drop-loc-",this._idPrefixDropAll="ba-search-drop-all-",this._idPrefixDropBdy="ba-search-drop-bdy-",this._idPrefixDropGroup="ba-search-drop-group-",this._idPrefixSuggest="ba-search-suggest-",this._geographyActiveLevels=[],this._localeSettings={language:"en-US",country:"US",location:"-117.196,34.056",geocodeOutFields:"Subregion,Region,PlaceName,Match_addr,Country,Addr_type,City,Place_addr,Phone,URL"},this.searchScope="address",this.searchQuery=null,this.suggestionResults=[],s.D.showDebugConsoleLogs=!0,s.B._initialize(this._localeSettings.language),this.labels={dropdownLocation:s.B.i18n("address-location-or-place"),dropdownBoundary:s.B.i18n("boundary-name"),dropdownAll:s.B.i18n("dropdown-all"),watermarkAll:s.B.i18n("all-placeholder"),watermarkLocation:s.B.i18n("enter-address-loc-or-place"),watermarkBoundary:s.B.i18n("enter-boundary-name")},this.showSearch=s.B.i18n("show-search"),this.searchPlaceholder=s.B.i18n("search-placeholder"),this.searchLabel=s.B.i18n("search-label"),this.searchAll=s.B.i18n("all-placeholder"),this.searchPlaceholderShort=s.B.i18n("search-placeholder-short"),this.searchEnterBoundary=s.B.i18n("search-enter-boundary"),this.searchBoundary=s.B.i18n("search-boundary"),this._onChangeQueue={}}onLocaleSettingsChanged(){this.checkLevels()}onEnvChanged(){console.log("%carcgis-ba-search environment: "+this.env,"color:green;font-size:14pt"),this.stEnv=this.env,s.E.setEnvironment(this.env)}onSearchTextChanged(){this.hideDropdown(),this.hideSuggestions(null);const e=s.A.queryElementById.call(this,this._instanceInputId);e&&this.currentSearchText&&(e.value=this.currentSearchText)}onColorsChanged(){this.stColors=JSON.parse(this.colors)}onStandardGeographyItemSelected(e){this._onSelectedGeographyItem(e.detail.item),this.hideSuggestions(null),this._clearSearchText(),this.focusInput()}onStandardGeographyItemChecked(e){"other"==e.detail.itemsType&&(this.hideSuggestions(null),this._clearSearchText(),this.focusInput())}async getSearchResults(){return this._searchResponseItemData}async setLocale(e){e&&(null!=typeof e.language&&(this._localeSettings.language=e.language),null!=typeof e.country&&(this._localeSettings.country=e.country),null!=typeof e.location&&(this._localeSettings.location=e.location),null!=typeof e.geocodeOutFields&&(this._localeSettings.geocodeOutFields=e.geocodeOutFields),this.onLocaleSettingsChanged())}async getGeographyLevels(){let e=[],t=await this.checkLevels();return t&&t.length>0&&t.forEach((t=>{e.push(t.name)})),e}async setColorTheme(e){if(this.stColorTheme=e.trim().toLowerCase(),e&&s.A.hasText(e)&&this.el){const t=e.trim().toLowerCase();"light"===t?(this._accordionTheme=t,this.el.style.setProperty("--calcite-ui-brand","#007ac2"),this.el.style.setProperty("--calcite-ui-brand-hover","#00619b"),this.el.style.setProperty("--calcite-ui-brand-press","#004874"),this.el.style.setProperty("--calcite-ui-background","#f8f8f8"),this.el.style.setProperty("--calcite-ui-foreground-1","#ffffff"),this.el.style.setProperty("--calcite-ui-foreground-2","#f3f3f3"),this.el.style.setProperty("--calcite-ui-foreground-3","#eaeaea"),this.el.style.setProperty("--calcite-ui-text-1","#151515"),this.el.style.setProperty("--calcite-ui-text-2","#4a4a4a"),this.el.style.setProperty("--calcite-ui-text-3","#6a6a6a"),this.el.style.setProperty("--calcite-ui-text-inverse","#ffffff"),this.el.style.setProperty("--calcite-ui-text-link","#00619b"),this.el.style.setProperty("--calcite-ui-border-1","#cacaca"),this.el.style.setProperty("--calcite-ui-border-2","#d4d4d4"),this.el.style.setProperty("--calcite-ui-border-3","#dfdfdf"),this.el.style.setProperty("--calcite-ui-border-input","#949494"),this.el.style.setProperty("--calcite-ui-info","#00619b"),this.el.style.setProperty("--calcite-ui-success","#35ac46")):"dark"===t&&(this._accordionTheme=t,this.el.style.setProperty("--calcite-ui-brand","#009af2"),this.el.style.setProperty("--calcite-ui-brand-hover","#007ac2"),this.el.style.setProperty("--calcite-ui-brand-press","#00619b"),this.el.style.setProperty("--calcite-ui-background","#353535"),this.el.style.setProperty("--calcite-ui-foreground-1","#2b2b2b"),this.el.style.setProperty("--calcite-ui-foreground-2","#202020"),this.el.style.setProperty("--calcite-ui-foreground-3","#151515"),this.el.style.setProperty("--calcite-ui-text-1","#ffffff"),this.el.style.setProperty("--calcite-ui-text-2","#bfbfbf"),this.el.style.setProperty("--calcite-ui-text-3","#9f9f9f"),this.el.style.setProperty("--calcite-ui-text-inverse","#151515"),this.el.style.setProperty("--calcite-ui-text-link","#00a0ff"),this.el.style.setProperty("--calcite-ui-border-1","#555555"),this.el.style.setProperty("--calcite-ui-border-2","#4a4a4a"),this.el.style.setProperty("--calcite-ui-border-3","#404040"),this.el.style.setProperty("--calcite-ui-border-input","#757575"),this.el.style.setProperty("--calcite-ui-info","#00a0ff"),this.el.style.setProperty("--calcite-ui-success","#36da43"));const o=this.el.querySelectorAll("ba-accordion");o&&o.length>0&&o.forEach((e=>{e.setColorTheme(t)}))}}async setActiveLevels(e){if(this.resetUI(!0,!1),e)if(e.length>0){this._geographyActiveLevels=[];for(let t=0;t<e.length;t++){let o=await this.levelNameIsValid(e[t]);o&&this._geographyActiveLevels.push(o)}}else this._geographyActiveLevels=[]}async setMapView(e){}async setColors(e){this.stColors=e}async onPropChange(e,t){this._onChangeCallback={fn:e,ctx:t}}_debounce2(e,t){const o=this;o._debounceTimer&&clearTimeout(o._debounceTimer),o._debounceTimer=setTimeout((function(){o._debounceTimer=null,e.apply(o)}),t)}_onFilteredPropChanged(){this._onChangeCallback&&this._onChangeCallback.fn(this._onChangeCallback.ctx,this._onChangeQueue),this._onChangeQueue={}}_onPropChanged(e,t){const o=this;this._onChangeQueue[e]=t,this._debounce2((()=>{o._onFilteredPropChanged.call(o)}),250)}_clearSearchText(){s.A.queryElementById.call(this,this._instanceInputId).value=""}async onClickLocationSuggestionItem(e){const t=this;await this.geocoderClient.geocode(e.text,{magicKey:e.magicKey,outFields:this._localeSettings.geocodeOutFields}).then((e=>{e&&(t._searchResponseItemData={context:t,type:"location",name:e.candidates[0].attributes.PlaceName,address:e.candidates[0].attributes.Place_addr,location:{lon:e.candidates[0].location.x,lat:e.candidates[0].location.y}},t.searchResults.emit(t._searchResponseItemData),this._onPropChanged("searchResults",t._searchResponseItemData),t.resetUI(!1))})).catch((e=>{console.log("%c"+e,"color:red")})),this.hideSuggestions(null),this._clearSearchText(),this.focusInput()}_onSelectedGeographyItem(e){const t=this,o=e.id;for(let e=0;e<this.suggestionResults.length;e++){let i=this.suggestionResults[e];if(i.attributes&&i.attributes.ObjectId==o){let e=i.attributes;s.G.requestStdGeography(e.DataLayerID,e.AreaID,{generalizationLevel:2,returnGeometry:!0,sourceCountry:"US"}).then((e=>{if(e&&e.length>0){let o=e[0];t._searchResponseItemData={context:t,type:"geography",areaName:i.attributes.AreaName,areaId:i.attributes.AreaID,geometry:o.geometry.rings},t.searchResults.emit(t._searchResponseItemData),this._onPropChanged("searchResults",t._searchResponseItemData),t.resetUI(!1)}}),(e=>{if(console.log("%c"+e,"color:red"),e)throw e}));break}}}async levelNameIsValid(e){if(!e||!s.A.hasText(e))return;let t=await this.checkLevels();for(let o=0;o<t.length;o++)if(t[o].name==e)return t[o].id}focusInput(){const e=s.A.queryElementById.call(this,this._instanceInputId);s.A.queryElement.call(this,"input",e).focus()}_loadInstances(){this._instanceId||(this._instanceId=s.a.generateId(this._idPrefix).id),this._instanceInputId||(this._instanceInputId=s.a.generateId(this._idPrefixInput).id),this._instanceDropLocId||(this._instanceDropLocId=s.a.generateId(this._idPrefixDropLoc).id),this._instanceDropAllId||(this._instanceDropAllId=s.a.generateId(this._idPrefixDropAll).id),this._instanceDropBdyId||(this._instanceDropBdyId=s.a.generateId(this._idPrefixDropBdy).id),this._instanceDropGroupId||(this._instanceDropGroupId=s.a.generateId(this._idPrefixDropGroup).id),this._instanceSuggestId||(this._instanceSuggestId=s.a.generateId(this._idPrefixSuggest).id),this._instanceDropDownId||(this._instanceDropDownId=s.a.generateId(this._idPrefixDropDown).id)}async checkLevels(){let e=this;if(e._geographyLevels&&e._geographyLevels.length>0&&e._geographyLevelsSource==e._localeSettings.country)return e._geographyLevels;{let t=await s.G.getStandardGeographyLevels(e._localeSettings.country);if(t&&t&&t.levels&&t.levels.length>0){e._geographyLevels=[];for(let o=0;o<t.levels.length;o++){let i=t.levels[o];i&&i.id&&i.name&&s.A.hasText(i.id)&&s.A.hasText(i.name)&&e._geographyLevels.push({id:i.id,name:i.name,show:!0})}return e._geographyLevelsSource=e._localeSettings.country,e._geographyLevels}}}async componentWillLoad(){this.geocoderClient=new n(this.token),this._loadInstances(),this.stColors=this.colors,await this.checkLevels(),!this._hasSetEnv&&this.env&&(this._hasSetEnv=!0,this.stEnv=this.env,s.E.setEnvironment(this.env))}getDropdown(){}resetUI(e,t){t||this.hideDropdown(),this.hideSuggestions(null),e||(s.A.queryElementById.call(this,this._instanceInputId).value="")}componentDidLoad(){const e=this;s.A.hasText(this.colors)&&(this.stColors=s.A.parseThemeString(this.colors)),e.stColors&&(e.el.style.setProperty("--calcite-ui-brand",e.stColors.brand),e.el.style.setProperty("--calcite-ui-foreground-1",e.stColors.foreground1),e.el.style.setProperty("--calcite-ui-foreground-2",e.stColors.foreground2),e.el.style.setProperty("--calcite-ui-foreground-3",e.stColors.foreground2),e.el.style.setProperty("--calcite-ui-text-1",e.stColors.text1),e.el.style.setProperty("--calcite-ui-text-2",e.stColors.text2),e.el.style.setProperty("--calcite-ui-text-3",e.stColors.text3),e.el.style.setProperty("--calcite-ui-border-2",e.stColors.border2),e.el.style.setProperty("--calcite-accordion-item-background",e.stColors.accordionBackground),e.el.style.setProperty("--calcite-accordion-item-foreground",e.stColors.accordionForeground),s.A.applyCss([["background-color",e.stColors.foreground2]],{selector:"calcite-button",subSelector:"button",verbose:!0}),s.A.applyCss([["left","0 !important"]],{selector:"calcite-input",subSelector:"div.wrapper"})),e._loadInstances(),e.applyCssAndThemeTo_Search(),s.T.setToken(e.username,e.token),(!e._localeSettings.language||e._localeSettings.language.length<=0)&&(e._localeSettings.language="en-us",s.B._initialize(e._localeSettings.language));const t=s.A.queryElementById.call(e,e._instanceInputId),o=s.A.queryElement.call(e,"input",t),i=s.A.queryElementById.call(e,e._instanceDropAllId);i&&(i.innerText=e.labels.dropdownAll);const n=s.A.queryElementById.call(e,e._instanceDropLocId);n&&(n.innerText=e.labels.dropdownLocation);const r=s.A.queryElementById.call(e,e._instanceDropBdyId);r&&(r.innerText=e.labels.dropdownBoundary),t&&t.setAttribute("placeholder",e.labels.watermarkLocation),o&&(o.addEventListener("focusin",(()=>{e.hideSuggestions(null)})),o.onchange=()=>{const t=s.A.queryElementById.call(this,this._instanceInputId).value;this._lastInputValue!=t&&e.toggleSuggestions(),this._lastInputValue=t},o.onkeydown=e=>{if("Backspace"===e.key||"Delete"===e.key){e.preventDefault(),e.stopPropagation();const t=e.target;if(t.value.length>0){const e=t.selectionStart,o=t.selectionEnd,i=e===o?t.value.slice(0,e-1)+t.value.slice(e):t.value.slice(0,e)+t.value.slice(o);t.value=i,t.focus(),e===o?t.setSelectionRange(e-1,e-1):t.setSelectionRange(e+1,e)}}},o.onkeyup=()=>{if(e.hideDropdown(),e.baSearchKeyTimer){let t=e.baSearchKeyTimer;e.baSearchKeyTimer=null,clearTimeout(t)}e.baSearchKeyTimer=setTimeout((function(){e.baSearchKeyTimer=null;const t=s.A.queryElementById.call(e,e._instanceInputId);e._lastInputValue=t.value,e.populateSuggestions();let o=s.A.queryElement.call(e,"ba-accordion");o&&o.openAccordion()}),800)});let c=s.A.queryElementById.call(e,e._instanceDropDownId);c&&c.addEventListener("calciteDropdownOpen",(function(){e.resetUI(!1,!0)}));let a=s.A.queryElementById.call(e,e._instanceDropAllId);a&&a.addEventListener("click",(()=>{let t=s.A.queryElementById.call(e,e._instanceInputId);t&&t.setAttribute("placeholder",e.labels.watermarkAll),e.searchScope="all",e.hideDropdown(),e.focusInput()}));let l=s.A.queryElementById.call(e,e._instanceDropLocId);l&&l.addEventListener("click",(()=>{let t=s.A.queryElementById.call(e,e._instanceInputId);t&&t.setAttribute("placeholder",e.labels.watermarkLocation),e.searchScope="address",e.hideDropdown(),e.focusInput()}));let h=s.A.queryElementById.call(e,e._instanceDropBdyId);h&&h.addEventListener("click",(()=>{let t=s.A.queryElementById.call(e,e._instanceInputId);t&&t.setAttribute("placeholder",e.labels.watermarkBoundary),e.searchScope="boundary",e.hideDropdown(),e.focusInput()}))}componentDidUpdate(){const e=this;setTimeout((()=>{e.applyCssAndThemeTo_Suggestions()}),0)}handleSearchScopeSelection(e){this.searchScope=e,this.suggestionResults=[]}handleLocationSelection(e,t){return t.context.onClickLocationSuggestionItem(t.item),e.preventDefault(),e.stopPropagation(),!1}renderGeocodeSuggestions(){const e=this,t={"padding-right":"0","padding-left":"5px"};return"address"==e.searchScope&&e.suggestionResults&&e.suggestionResults.length>0?(0,i.h)("calcite-list",null,this.suggestionResults.map((o=>(0,i.h)("calcite-list-item",{value:o.magicKey,label:o.text,onClick:t=>e.handleLocationSelection(t,{context:e,item:o})},(0,i.h)("calcite-icon",{style:t,icon:"pin",scale:"s",slot:"content-start"}))))):(0,i.h)("ul",{class:"baSearchSuggestionsUl"},(0,i.h)("li",{key:null}))}renderStdGeoSearchResults(){const e=this;if("boundary"==e.searchScope&&e.suggestionResults&&e.suggestionResults.length>0&&e.suggestionResults[0].attributes&&e.suggestionResults[0].attributes.DataLayerID){let t,o,i={};for(let n=0;n<e.suggestionResults.length;n++)try{if(t=e.suggestionResults[n],o=t.attributes.DataLayerID,s.A.hasText(o)){i[o]||(i[o]={aveScore:null,records:[]});let e="   Score:"+t.attributes.Score.toString(),s=t.attributes.CountryAbbr+"/"+t.attributes.MajorSubdivisionName+"/"+t.attributes.AreaID+e,n={id:t.attributes.ObjectId,name:t.attributes.AreaName,subText:s,score:t.attributes.Score};i[o].records.push(n)}}catch(e){s.D.log(e)}let n=(new Date).getTime();return e.renderStdGeographyLevelLists(i,n)}}renderStdGeographyLevelAccordion(e,t,o){if(t.records&&t.records.length>0){const s=40,n=t.records.sort((function(e,t){return null==e.score?0:null==t.score?1:t.score-e.score})).slice(0,s);let r=[];n.forEach((function(e){r.push({id:e.id,name:e.name,subText:e.subText||"",score:e.score,icon:"polygon-area"})}));const c=JSON.stringify(r);return(0,i.h)("ba-accordion",{groupid:o,calciteicon:"polygon-area",displayname:e,content:c})}}calculateLevelAverageScores(e){let t=s.A.getKeys(e);for(let o=0;o<t.length;o++){let i=e[t[o]];if(!i.records||i.records.length<=0)i.aveScore=null;else{let e=0,t=0;i.records.forEach((function(o){e+=o.score,t++})),i.aveScore=e/t}}}renderStdGeographyLevelLists(e,t){let o=[],n=s.A.getKeys(e);if(n.length>0){this.calculateLevelAverageScores(e);let s=n.sort((function(t,o){return null==e[t].aveScore?0:null==e[o].aveScore?1:e[o].aveScore-e[t].aveScore}));for(let i=0;i<s.length;i++){let n=e[s[i]];null!=n.aveScore&&o.push(this.renderStdGeographyLevelAccordion(s[i],n,t))}return(0,i.h)("div",{class:"ba-search-boundary-types"},o)}}hideDropdown(){s.A.queryElementById.call(this,this._instanceDropDownId).setAttribute("open","false")}toggleDropdown(){let e=s.A.queryElementById.call(this,this._instanceDropDownId);"true"==e.getAttribute("open")?this.hideDropdown():(this.hideSuggestions(null),e.setAttribute("open","true")),s.A.queryElementById.call(this,this._instanceInputId).value=""}toggleSuggestions(){const e=s.A.queryElementById.call(this,this._instanceSuggestId);e&&("0"==e.style.maxHeight?this.showSuggestions(e):this.hideSuggestions(e))}applyCssAndThemeTo_Suggestions(){let e=this;s.A.applyCss.call(e,[["background-color","#282828"],["color","#f4f3f3"]],{selector:"div.baSearchSuggestionsOuter"});let t=s.A.queryElementAll.call(e,"calcite-dropdown-item");t&&t.length>0&&t.forEach((function(t){s.A.queryElement.call(e,"div.container",t).style.paddingLeft="4px"}))}applyCssAndThemeTo_Search(){const e=this;s.A.applyCss.call(e,[["paddingLeft","4px"]],{id:s.A.fixId(e._instanceDropLocId),subSelector:"div.container"}),s.A.applyCss.call(e,[["paddingLeft","4px"]],{id:s.A.fixId(e._instanceDropBdyId),subSelector:"div.container"}),s.A.applyCss.call(e,[["paddingLeft","4px"]],{selector:"calcite-dropdown-item",subSelector:"div.container"}),s.A.applyCss.call(e,[["height","28px"],["top","-1px"],["fontSize","0.8125rem"],["paddingLeft","2px"],["paddingRight","2px"]],{selector:"calcite-input",subSelector:"input"}),s.A.applyCss.call(e,[["left","0"],["width","calc(100% - 22px"]],{selector:"calcite-input",subSelector:".wrapper"}),s.A.applyCss.call(e,[["border","none"],["backgroundColor","transparent"]],{selector:"calcite-input",subSelector:"button"}),s.A.applyCss.call(e,[["height","26px"]],{selector:".baSearchOuter"}),s.A.applyCss.call(e,[["height","26px"],["width","22px"]],{selector:".arcgisBaSearchDropdownChooser"}),s.A.applyCss.call(e,[["height","26px"],["width","22px"],["top","1px"]],{selector:"calcite-button",subSelector:"button"}),s.A.applyCss.call(e,[["fontSize","9pt"]],{selector:"calcite-dropdown-item",subSelector:"div.container"}),s.A.applyCss.call(e,[["minWidth","212px"]],{selector:"calcite-dropdown-group"})}showSuggestions(e){let t=this;if(e=e||s.A.queryElementById.call(t,t._instanceSuggestId)){e.style.maxHeight="500px",e.style.display="block";let o=s.A.queryElementById.call(t,s.A.fixId(t._instanceInputId)),i=s.A.queryElement.call(t,"button.calcite-input__clear-button",o);if(i&&(i.style.border="none",i.style.backgroundColor="transparent"),"light"==t.stColorTheme){function n(){}setTimeout(n,0)}}}hideSuggestions(e){e||(e=s.A.queryElementById.call(this,this._instanceSuggestId)),e&&"0"!=e.style.maxHeight&&(e.style.maxHeight="0",e.style.display="none")}async populateSuggestions(){const e=this;if(e.suggestionResults=null,!e.token||!e.username)return void console.log("%cERROR: no token set for suggestions search request",s.A.errorStyle);e.showSuggestions(null);const t=s.A.queryElementById.call(e,e._instanceInputId);if(e.searchQuery=t.value,e.searchQuery&&e.searchQuery.length>0){if("address"===e.searchScope)e.geocoderClient.suggest(e.searchQuery,{location:e._localeSettings.location}).then((t=>{e.suggestionResults=[],t&&t.length>0&&t.forEach((t=>{t.isCollection||e.suggestionResults.push(t)}))})).catch((t=>{e.suggestionResults=[],console.log(t)}));else if("boundary"===e.searchScope){async function o(){let t=[],o=await e.checkLevels();if(o&&o.length>0)return o.forEach((o=>{(null==typeof e._geographyActiveLevels||e._geographyActiveLevels.length<=0||e._geographyActiveLevels.includes(o.id))&&t.push(o.id)})),t}let i=await o();i&&i.length>0?s.T.getToken().then((t=>{s.A.hasText(t)||console.log("%cError: no token - unable to make search network request","color:red"),s.G.searchStdGeography(e.searchQuery,{featureLimit:1e3,geographyLayers:i,useFuzzySearch:!0,sourceCountry:e._localeSettings.country}).then((t=>{e._openFirst=!0,e.suggestionResults=t,t.length||s.D.log("No STD GEO search results")})).catch((t=>{if(t.message.toLowerCase().indexOf("invalid token")>=0){let e=["color:#000","background-color:red","padding:6px","border-radius:3px"].join(";");console.log("%c ERROR: Invalid or expired token.  Must update.",e)}e.hideSuggestions(null)}))})):(console.log("%csearchStdGeography error: no geography levels selected","color:red"),e.hideSuggestions(null))}}else e.hideSuggestions(null)}render(){const e=this;if(e._openFirst){function n(){let t=s.A.queryElement.call(e,"ba-accordion");t&&t.openAccordion()}e._openFirst=!1,setTimeout(n,100)}const t=this.colors?this.colors.foreground:"",o="light"===this.stColorTheme?"lightSuggestionOuter":"baSearchSuggestionsOuter";return(0,i.h)("div",{class:"baSearchOuter"},(0,i.h)("calcite-dropdown",{id:this._instanceDropDownId,scale:"s",width:"20px",class:"arcgisBaSearchDropdownChooser"},(0,i.h)("calcite-button",{style:{width:"22px",height:"24px",top:"1px","background-color":{btnColor:t}},slot:"dropdown-trigger",color:"neutral","icon-start":"chevron-down",scale:"s"}),(0,i.h)("calcite-dropdown-group",{id:this._instanceDropGroupId,class:"ba-calcite-dropdown-group",style:{width:"100%"},"selection-mode":"single",scale:"s"},(0,i.h)("calcite-dropdown-item",{id:this._instanceDropAllId,"icon-start":"pin",tabIndex:"0",style:{height:"30px","padding-left":"0","border-bottom":"solid 1px #656565"},onClick:()=>this.handleSearchScopeSelection("all")},this.searchAll),(0,i.h)("calcite-dropdown-item",{id:this._instanceDropLocId,"icon-start":"pin",tabIndex:"0",style:{height:"30px"},onClick:()=>this.handleSearchScopeSelection("address")},this.searchPlaceholderShort),(0,i.h)("calcite-dropdown-item",{id:this._instanceDropBdyId,"icon-start":"polygon",tabIndex:"0",style:{height:"30px"},onClick:()=>this.handleSearchScopeSelection("boundary")},this.searchBoundary))),(0,i.h)("calcite-input",{id:this._instanceInputId,class:"arcgisBaSearchInput",clearable:"false",placeholder:"address"===this.searchScope?this.searchPlaceholder:this.searchEnterBoundary}),(0,i.h)("div",{id:this._instanceSuggestId,class:o}," ","address"===this.searchScope?this.renderGeocodeSuggestions():this.renderStdGeoSearchResults()))}get el(){return(0,i.g)(this)}static get watchers(){return{env:["onEnvChanged"],currentSearchText:["onSearchTextChanged"],colors:["onColorsChanged"]}}};r.style=":host{display:block}arcgis-ba-search{width:50%;height:36px}.ba-calcite-dropdown-group{display:block;min-width:240px}.arcgisBaSearchIconButton{width:30px;height:30px;background:rgba(4, 44, 110, 0.29);border:solid 1px gray;border-left:none;--calcite-ui-icon-color:#333}.arcgisBaSearchDropdownChooser{position:relative;width:28px;top:-1px;left:0px;height:30px;float:left;z-index:2}.arcgisBaSearchInput{position:relative;left:0;z-index:1}.arcgisBASearchOuter{position:relative}.baSearchOuter{position:relative;height:32px;width:100%;background-color:#eee;border:solid 1px rgb(210, 210, 210)}.baSearchElement{position:absolute;top:0;left:0;width:32px;height:32px;font-family:arial;font-size:13pt;z-index:1}.baSearchMagGlass{position:absolute;top:0;right:-7px;height:calc(100% - 2px);width:32px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' version='1.1' x='0px' y='0px' width='28px' height='28px' viewBox='0 0 28 28' enable-background='new 0 0 28 28' xml:space='preserve'%3E%3Cpath d='M29.974,53.745c-0.034-0.165-0.307-0.782-0.402-0.923c-0.096-0.137-1.078-0.882-1.232-0.942 c-0.158-0.06-0.851-0.03-1.041-0.03l-14.906,0.033l2.392-2.447c0.085-0.086,0.173-0.184,0.259-0.27 c0.087-0.086,0.173-0.173,0.261-0.26c0.086-0.086,0.168-0.172,0.247-0.26c0.077-0.086,0.149-0.172,0.22-0.259 c0.139-0.12,0.258-0.251,0.352-0.39c0.096-0.139,0.176-0.281,0.247-0.428c0.07-0.148,0.12-0.303,0.156-0.469 c0.035-0.166,0.051-0.342,0.051-0.533c0-0.087-0.005-0.168-0.014-0.247c-0.008-0.078-0.021-0.155-0.038-0.233 c-0.018-0.077-0.039-0.156-0.065-0.234c-0.025-0.077-0.057-0.16-0.091-0.246c-0.035-0.086-0.074-0.169-0.117-0.246 c-0.043-0.078-0.092-0.156-0.143-0.234c-0.051-0.077-0.108-0.151-0.168-0.221c-0.061-0.07-0.126-0.138-0.195-0.207 c-0.139-0.121-0.281-0.225-0.429-0.312s-0.3-0.158-0.455-0.22c-0.156-0.061-0.321-0.102-0.494-0.127 c-0.172-0.025-0.354-0.035-0.546-0.035c-0.19,0-0.372,0.025-0.545,0.051c-0.173,0.025-0.337,0.092-0.494,0.152 c-0.156,0.061-0.307,0.178-0.455,0.264c-0.146,0.086-0.29,0.279-0.429,0.4L2,54.301l9.95,9.646c0.138,0.139,0.281,0.08,0.429,0.174 c0.147,0.096,0.298,0.18,0.454,0.248c0.156,0.07,0.321,0.121,0.494,0.154c0.173,0.035,0.355,0.053,0.546,0.053 c0.19,0,0.372-0.018,0.545-0.053c0.174-0.033,0.339-0.084,0.493-0.154c0.155-0.068,0.308-0.152,0.454-0.248 c0.148-0.094,0.29-0.211,0.43-0.35c0.139-0.121,0.257-0.252,0.351-0.391c0.096-0.139,0.178-0.285,0.248-0.441 c0.068-0.156,0.121-0.318,0.156-0.482c0.034-0.164,0.051-0.34,0.051-0.531c0-0.07-0.004-0.143-0.014-0.221 c-0.009-0.078-0.021-0.156-0.038-0.234c-0.018-0.076-0.04-0.154-0.064-0.232c-0.026-0.078-0.058-0.162-0.092-0.248 c-0.035-0.088-0.075-0.168-0.117-0.246c-0.043-0.078-0.091-0.15-0.143-0.223c-0.051-0.068-0.107-0.139-0.168-0.205 c-0.061-0.072-0.127-0.141-0.195-0.211c-0.07-0.084-0.143-0.174-0.221-0.258c-0.078-0.088-0.16-0.176-0.247-0.262 c-0.088-0.086-0.173-0.176-0.261-0.262c-0.085-0.088-0.172-0.18-0.259-0.266l-2.391-2.352l14.906-0.031 c0.19,0,0.883-0.059,1.041-0.121c0.154-0.061,0.742-0.436,0.882-0.559c0.139-0.121,0.528-0.676,0.598-0.832 c0.068-0.156,0.121-0.217,0.155-0.379C30.009,54.619,30.009,53.91,29.974,53.745z' style='fill:%23555;fill-opacity:1'/%3E%3Cg id='g2988' style='fill:%23555;fill-opacity:1'%3E%3Cpath d='M0.1,10.535c0-1.45,0.271-2.808,0.815-4.076c0.543-1.268,1.286-2.374,2.229-3.315c0.941-0.942,2.047-1.685,3.315-2.229 C7.727,0.372,9.085,0.1,10.535,0.1s2.808,0.271,4.076,0.815c1.269,0.543,2.374,1.286,3.315,2.229 c0.94,0.941,1.685,2.047,2.229,3.315c0.543,1.268,0.814,2.626,0.814,4.076c0,0.508-0.035,1.01-0.109,1.509 c-0.071,0.498-0.177,0.982-0.311,1.453c-0.138,0.47-0.306,0.924-0.504,1.358c-0.198,0.434-0.428,0.851-0.681,1.25l7.88,7.853 c0.221,0.219,0.381,0.471,0.491,0.762c0.108,0.291,0.163,0.586,0.163,0.883c0,0.298-0.055,0.595-0.163,0.884 c-0.11,0.291-0.271,0.543-0.491,0.76c-0.106,0.109-0.227,0.206-0.351,0.287c-0.127,0.08-0.26,0.149-0.395,0.204 c-0.137,0.054-0.275,0.095-0.422,0.124c-0.145,0.025-0.29,0.039-0.435,0.039s-0.291-0.014-0.436-0.039 c-0.146-0.029-0.291-0.07-0.434-0.124c-0.146-0.055-0.281-0.124-0.408-0.204c-0.127-0.081-0.244-0.178-0.354-0.287l-7.853-7.881 c-0.398,0.255-0.816,0.483-1.25,0.681c-0.435,0.2-0.888,0.367-1.359,0.505c-0.471,0.136-0.956,0.238-1.454,0.312 c-0.499,0.072-1,0.107-1.509,0.107c-1.448,0-2.807-0.271-4.076-0.814c-1.268-0.543-2.373-1.288-3.314-2.229 c-0.943-0.942-1.685-2.048-2.229-3.315c-0.543-1.268-0.815-2.626-0.815-4.076H0.1z M3.579,10.535c0,0.961,0.182,1.862,0.544,2.704 c0.362,0.844,0.86,1.581,1.494,2.215c0.634,0.635,1.372,1.131,2.215,1.493c0.841,0.363,1.742,0.545,2.703,0.545 s1.862-0.182,2.704-0.545c0.844-0.362,1.581-0.858,2.214-1.493c0.635-0.634,1.132-1.372,1.494-2.215 c0.363-0.841,0.545-1.743,0.545-2.704s-0.182-1.862-0.545-2.703c-0.362-0.843-0.859-1.582-1.494-2.215 c-0.633-0.634-1.371-1.132-2.214-1.494c-0.841-0.362-1.743-0.544-2.704-0.544S8.673,3.76,7.832,4.123 C6.989,4.485,6.25,4.983,5.617,5.617S4.485,6.989,4.123,7.832C3.76,8.673,3.579,9.574,3.579,10.535z' id='path2990' style='fill:%23555;fill-opacity:1'/%3E%3C/g%3E%3C/svg%3E\");background-size:18px;background-position:2px 6px;background-repeat:no-repeat;border:none}.baSearchInput{position:absolute;top:0;left:32px;height:28px;width:100%;border:none;font-size:12pt}.htmlSearchBounds{position:relative;top:0;left:40px;width:50%}.baSearchToggle{position:absolute;top:0;left:0;width:32px;height:32px;background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cpath d='M18.1,232.2l452.4,581.9c15.1,19.5,44.5,19.5,59.7,0L982,232.2c19.3-24.8,1.5-60.9-29.9-60.9H47.9C16.4,171.2-1.3,207.4,18.1,232.2z'/%3E%3C/g%3E%3C/svg%3E%0A\");background-size:12px;background-position:12px;background-repeat:no-repeat;border:none}.baSearchInput:focus{outline:none}.baSearchDropdownTarget{position:absolute;top:-10px;left:-10px;width:42px;height:42px;background-color:rgba(0, 0, 0, 0.01);z-index:3}.baSearchDropdownText{position:absolute;top:8px;left:37px}.baSearchDropdownImgLoc{position:absolute;top:6px;left:4px;width:24px;height:26px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%236F6F6F' d='M7.4688 0C5.3586 0 3 .8459 3 3.0469V12l4.5 4 4.5-4V3.047C12 .8459 9.5797 0 7.4687 0zM11 11.5508L7.5 14.662 4 11.5508v-8.504C4 1.0577 7.1138 1 7.4688 1 8.7803 1 11 1.4312 11 3.0469v8.5039zM7.5 3C6.1193 3 5 4.1193 5 5.5S6.1193 8 7.5 8 10 6.8807 10 5.5 8.8807 3 7.5 3zm0 4.125c-.896 0-1.625-.729-1.625-1.625 0-.8961.729-1.625 1.625-1.625s1.625.7289 1.625 1.625c0 .896-.729 1.625-1.625 1.625z'/%3E%3C/svg%3E\");background-size:24px;background-repeat:no-repeat}.baSearchDropdownImgBdy{position:absolute;top:6px;left:4px;width:24px;height:24px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%236F6F6F' d='M2 16H1V1h1v15zM15 .5h-1v7h1v-7zm0 .5V0H1v1h14zm-5 6.4928V8h5V7h-4.5432M3.445 15.8799V15H1v1h2.2299m8.5968-8.9816h-.9945l-.112.1134c-.1064.1133-.375.4022-.4073.4598-.1172.21-.1445.5303-.1787 1.0361-.0117.168-.0628.9791-.1039 1.0621-.2607.3682-.1006.8613.0166 1.2237a1.806 1.806 0 0 1 .0264.078c-.0977.0157-.1816.047-.252.0929l-.0605-.0127c-.0068-.002-.7373-.1768-1.3828-.1768-.4082 0-.6934.0674-.876.21-.3232.2548-.501.3945-.5195.6513-.0166.2373.1289.3887.2558.5205l.0899.0957c.2217.2412.33.545.2617.7393-.0791.2275-.417.3135-.6113.3437a1.6306 1.6306 0 0 1-.2725.0235c-.3242 0-.5664-.1084-.8525-.2354-.3399-.1513-.9566-.3222-1.5338-.3398-.3095 0-.9385.25-1.0361.7265-.043.2042-.0918.5948.0596.8975.0039.0381.2027.2861-.7915 1.3555L2.4448 16h1.0748c.5275-.638.8057-1.2883.5453-1.815-.0214-.044-.04-.1885-.0127-.3555.0342-.042.2041-.124.255-.125.4072.0127.9077.1308 1.2241.2705.3193.1426.6807.3027 1.1748.3027.123 0 .2549-.0098.3975-.0312.8203-.13 1.128-.546 1.2422-.873.168-.4815.0029-1.0724-.4297-1.544l-.0176-.0186c.0322-.0254.0664-.0517.0996-.0781.001 0 .0664-.039.3408-.039.3545 0 .8496.0624 1.2334.1552.1338.0322.2373.0527.336.0527.162 0 .288-.0556.3379-.121l.1445.0038c.1816 0 .3262-.0683.4297-.203.2011-.2589.0976-.5772-.0127-.917-.0957-.291-.1358-.4678-.126-.5108.1611-.2246.2103-.8912.2513-1.484.0127-.1826.043-.6093.0752-.6826a.309.309 0 0 1 .0303-.039h2.8057v-.8008l-2.0175-.129z'/%3E%3C/svg%3E\");background-size:24px;background-repeat:no-repeat}.baSearchDropdownMenu{position:absolute;top:27px;left:6px;min-width:260px;margin:0;border-radius:4px;box-shadow:0 1px 3px #ccc;list-style:none;padding-left:0;background-color:white;z-index:4;border:solid 1px #bcb8b8;display:none}.baSearchDropdownMenu.baSearchMenuIsVisible{display:block}.baSearchDropdownMenu li{padding:5px 10px}.baSearchDropdownMenu li:hover{background-color:#eee}.baSearchDropdownMenu li:active{background-color:#ddd}ul.baSearchDropdownMenu li{position:relative;height:30px;padding-top:9px;padding-bottom:0;z-index:4}.lightSuggestionOuter,.baSearchSuggestionsOuter{position:absolute;top:30px;left:0px;min-width:210px;height:auto;min-height:41px;overflow-y:hidden;max-height:0px;transition-property:all;transition-duration:.5s;transition-timing-function:cubic-bezier(0, 1, 0.5, 1);font-family:arial;font-size:10pt;border:solid 1px #bcb8b8;z-index:4;overflow:auto;display:none}.baSearchSuggestionsOuter{width:210px;max-width:210px;color:#bfbfbf;background-color:#2b2b2b}.lightSuggestionOuter{width:100%;max-width:100%;color:#151515;background-color:#f8f8f8}ul.baSearchSuggestionsUl{padding-inline-start:12px;margin-block-start:8px;margin-block-end:6px;width:calc(100% - 14px)}ul.baSearchSuggestionsUl li{position:relative;display:flex;flex-direction:row;align-items:center;padding-top:4px;padding-left:1px;padding-bottom:4px;font-size:9.5pt;list-style:none;border-top:solid 1px #ddd;background-color:#fff;z-index:4}.baSearchSuggestionNoSub{font-size:11.5pt;color:#222}.baSearchStdGeographyInfo{font-size:8.5pt;padding-top:4px;color:#888}.baSearchStdGeographyName{font-size:11.5pt}ul.baSearchSuggestionsUl li:hover{background-color:#e0e1e3}ul.baSearchSuggestionsUl li:active{background-color:#ddd}calcite-input::part(badarkinput)::placeholder{color:#bababa;opacity:1;}calcite-input::part(badarkinput):-ms-input-placeholder{color:#bfbfbf}calcite-input::part(badarkinput)::-ms-input-placeholder{color:#bfbfbf}.ba-dark{background-color:#2b2b2b !important;color:#fefefe !important}.ba-dark-item{background-color:#464646 !important;color:#fefefe !important}.ba-dark-item-selected{background-color:#363636 !important;color:#fefefe !important}";const c=class{constructor(e){(0,i.r)(this,e),this.accordionOpened=(0,i.c)(this,"accordionOpened",7),this.accordionWillOpen=(0,i.c)(this,"accordionWillOpen",7),this.accordionItemClicked=(0,i.c)(this,"accordionItemClicked",7),this.accordionItemsChecked=(0,i.c)(this,"accordionItemsChecked",7),this.debugContent=[],this.ignoreClick=0,this._idPrefix="ba-accordion-",this._idItemPrefix="ba-item-",this._idIconPrefix="ba-accordion-icon-",this._idContentPrefix="ba-content-",this._isReport=!1,this.hideOnEmpty="true",this.displayCount=!0,this.contentInline="true",this.showcheckbox="false",this.ischecked="false"}onContentChanged(){try{this.content&&s.A.hasText(this.content)&&(this.stContent=JSON.parse(this.content))}catch(e){console.log(e)}}onAccordionTextChanged(){this.stDisplayName=this.displayname}onGroupIdChanged(){this.stGroupId=this.groupid}onContentInlineChanged(){this.stContentInline="true"==this.contentInline}accordionCheckboxChanged(){this.stShowCheckbox="true"==this.showcheckbox}accordionOpenedEventHandler(e){let t=e.detail.groupid,o=e.detail.instanceId;null!=o&&o!=this._instanceId&&null!=t&&(!this.stGroupId&&this.groupid&&(this.stGroupId=this.groupid),this.stGroupId&&this.stGroupId==t&&this.closeAccordion(null))}async openAccordion(){}async setColorTheme(e){if(e&&s.A.hasText(e)&&this.el){const t=e.trim().toLowerCase();"light"===t?(this.el.style.setProperty("--calcite-ui-brand","#007ac2"),this.el.style.setProperty("--calcite-ui-brand-hover","#00619b"),this.el.style.setProperty("--calcite-ui-brand-press","#004874"),this.el.style.setProperty("--calcite-ui-background","#f8f8f8"),this.el.style.setProperty("--calcite-ui-foreground-1","#ffffff"),this.el.style.setProperty("--calcite-ui-foreground-2","#f3f3f3"),this.el.style.setProperty("--calcite-ui-foreground-3","#eaeaea"),this.el.style.setProperty("--calcite-ui-text-1","#151515"),this.el.style.setProperty("--calcite-ui-text-2","#4a4a4a"),this.el.style.setProperty("--calcite-ui-text-3","#6a6a6a"),this.el.style.setProperty("--calcite-ui-text-inverse","#ffffff"),this.el.style.setProperty("--calcite-ui-text-link","#00619b"),this.el.style.setProperty("--calcite-ui-border-1","#cacaca"),this.el.style.setProperty("--calcite-ui-border-2","#d4d4d4"),this.el.style.setProperty("--calcite-ui-border-3","#dfdfdf"),this.el.style.setProperty("--calcite-ui-border-input","#949494"),this.el.style.setProperty("--calcite-ui-info","#00619b"),this.el.style.setProperty("--calcite-ui-success","#35ac46")):"dark"===t&&(this.el.style.setProperty("--calcite-ui-brand","#009af2"),this.el.style.setProperty("--calcite-ui-brand-hover","#007ac2"),this.el.style.setProperty("--calcite-ui-brand-press","#00619b"),this.el.style.setProperty("--calcite-ui-background","#353535"),this.el.style.setProperty("--calcite-ui-foreground-1","#2b2b2b"),this.el.style.setProperty("--calcite-ui-foreground-2","#202020"),this.el.style.setProperty("--calcite-ui-foreground-3","#151515"),this.el.style.setProperty("--calcite-ui-text-1","#ffffff"),this.el.style.setProperty("--calcite-ui-text-2","#bfbfbf"),this.el.style.setProperty("--calcite-ui-text-3","#9f9f9f"),this.el.style.setProperty("--calcite-ui-text-inverse","#151515"),this.el.style.setProperty("--calcite-ui-text-link","#00a0ff"),this.el.style.setProperty("--calcite-ui-border-1","#555555"),this.el.style.setProperty("--calcite-ui-border-2","#4a4a4a"),this.el.style.setProperty("--calcite-ui-border-3","#404040"),this.el.style.setProperty("--calcite-ui-border-input","#757575"),this.el.style.setProperty("--calcite-ui-info","#00a0ff"),this.el.style.setProperty("--calcite-ui-success","#36da43"))}}getAllCheckedItems(e){let t=[],o=e||JSON.parse(this.stContent);return o&&o.length>0&&o.forEach((e=>{e.usesCheckbox&&e.isChecked&&t.push(e.id)})),t}componentWillLoad(){this._instanceId||(this._instanceId=s.a.generateId(this._idPrefix).id),this._instanceContentId||(this._instanceContentId=s.a.generateId(this._idContentPrefix).id),this._instanceIconId||(this._instanceIconId=s.a.generateId(this._idIconPrefix).id),(!this.stDisplayName||this.stDisplayName.length<=0)&&(this.displayname&&this.displayname.length>0?this.stDisplayName=this.displayname:this.stDisplayName="?"),!this.stGroupId&&this.groupid&&(this.stGroupId=this.groupid),!this.stContentInline&&this.contentInline&&(this.stContentInline="true"==this.contentInline),!this.stContent&&this.content&&s.A.hasText(this.content)&&(this.stContent=JSON.parse(this.content))}componentDidLoad(){const e=this;let t=s.A.queryElementById.call(this,this._instanceId);t&&t.addEventListener("click",(t=>{e.onClickAccordion.call(e,t)})),setTimeout(e.addCheckboxEvents,1990)}componentDidUpdate(){}_getContentItemCheckboxState(e){let t=this._getContent();for(let o=0;o<t.length;o++)if(t[o].itemId==e)return t[o].isChecked;return!1}_toggleContentCheckboxState(e){let t=this._getContent(),o=!1;if(t)for(let i=0;i<t.length;i++)if(t[i].id==e){t[i].isChecked=!t[i].isChecked,o=t[i].isChecked;break}return{content:t,newState:o}}onCheckboxChanged(e){let t=e.currentTarget;let o=t.getAttribute("itemId"),i=this._toggleContentCheckboxState(o);const s=i.content,n=i.newState;return-1!=o&&t.classList.contains("ba-target-content")?(this.stContent=s,this.content=JSON.stringify(s),this._stCount=(new Date).getMilliseconds()):this.setAllCheckboxStates(n),e.stopPropagation(),e.preventDefault(),this.ignoreClick=1,!1}checkboxChangeHandler(e){e.currentTarget.context.onCheckboxChanged(e)}addCheckboxEvents(){let e=this,t=s.A.queryElementAll.call(e,"calcite-checkbox");if(t&&t.length>0)for(let o=0;o<t.length;o++){t[o].onclick=t=>{e.checkboxChangeHandler(t)};const i=s.A.queryElement.call(t[o],"div.toggle");i&&i.addEventListener("click",e.checkboxChangeHandler)}}setAllCheckboxStates(e){let t=this._getContent();if(t&&!(t.length<=0)){for(let o=0;o<t.length;o++)t[o].isChecked=e;this.content="",this.content=JSON.stringify(t),this.stContent=t,this._stCount=this._stCount+1,this.accordionItemsChecked.emit({accordion:this,items:this.getAllCheckedItems(t)})}}onClickItemPin(e,t){let o=this._getContent(),i=o[t];return this._toggleContentItem(o,i.id,"isPinned"),this.content=JSON.stringify(o),e.stopPropagation(),e.preventDefault(),!1}closeAccordion(e){let t=e?e.elem:s.A.queryElementById.call(this,this._instanceId),o=e?e.content:s.A.queryElementById.call(this,this._instanceContentId),i=e?e.icon:s.A.queryElementById.call(this,this._instanceIconId);t.classList.remove("accordion__active"),o.style.maxHeight=null,i.setAttribute("icon-end","caret-down"),this.hideContent(o)}showContent(e){e||(e=s.A.queryElementById.call(this,this._instanceContentId)),e.classList.contains("ba-content-hidden")&&e.classList.remove("ba-content-hidden")}hideContent(e){e||(e=s.A.queryElementById.call(this,this._instanceContentId)),e.classList.contains("ba-content-hidden")||e.classList.add("ba-content-hidden")}onClickAccordionItem(e,t,o){return o.usesCheckbox||this.accordionItemClicked.emit({context:t,item:o}),e.stopPropagation(),e.preventDefault(),!1}onClickAccordion(e){if(e.target.classList.contains("ba-target-check"))return!1;if(this.ignoreClick>0)return this.ignoreClick--,!1;const t=s.A.queryElementById.call(this,this._instanceId),o=s.A.queryElementById.call(this,this._instanceContentId),i=s.A.queryElementById.call(this,this._instanceIconId);if(o.style.maxHeight)this.closeAccordion({elem:t,content:o,icon:i});else{function n(){o.style.overflow="auto"}t.classList.add("accordion__active"),o.style.maxHeight="100%",i.setAttribute("icon-end","caret-up"),this.showContent(o),this.accordionOpened.emit({accordion:this,groupid:this.stGroupId,instanceId:this._instanceId}),setTimeout(n,500)}}_getContent(){if(!this.stContent)if(this.content)this.stContent=JSON.parse(this.content);else if(!this.showDebug){let e=s.A.queryElementById.call(this,this._instanceId);if(e){let t=e.getAttribute("content");t&&t.length>0&&(this.content=t,this.stContent=JSON.parse(this.content))}}return this.stContent}_getContentItem(e,t){for(let o=0;o<e.length;o++){let i=e[o];if(i.id==t)return i}return null}_setContentItem(e,t,o,i){for(let s=0;s<e.length;s++)if(e[s].id==t){e[s][o]=i;break}}_toggleContentItem(e,t,o){let i=this._getContentItem(e,t);if(i){const s=!i[o];this._setContentItem(e,t,o,s)}}async _updateLayout(){if(this._isReport=this.el?this.el.classList.contains("reportList"):null,this._isReport){let e=s.A.queryElement.call(this,"calcite-accordion");e&&(e.style.border="none");let t=s.A.queryElementAll.call(this,"calcite-checkbox"),o=s.A.queryElementAll.call(this,"calcite-list-item");t&&t.length>0&&t.forEach((e=>{e.className="",this._isReport&&e.classList.add("ba-accordion-report-checkbox"),e.classList.add("ba-target-content")})),o&&o.length>0&&o.forEach((e=>{s.A.applyCss.call(e,[["display","none"]],{selector:"div.content-start"}),s.A.applyCss.call(e,[["padding-inline","2px"]],{selector:"div.content"})}))}}generateCheckbox(e,t,o,s){return t?o?(0,i.h)("calcite-checkbox",{itemId:e,class:s,checked:!0,onClick:e=>this.onCheckboxChanged(e)}):(0,i.h)("calcite-checkbox",{class:s,itemId:e,onClick:e=>this.onCheckboxChanged(e)}):""}render(){const e=this;let t=e._getContent();if(!t)return;const o=e.displayname;this._isReport=e.el.classList.contains("reportList");const s=this._isReport?{position:"absolute",top:"0","min-height":"28px"}:{"border-top":"solid 1px #505050ff"},n={"padding-right":"0","padding-left":"5px"},r=this._isReport?{position:"relative","min-height":"42px","border-top":"solid 1px #505050ff"}:{},c=e.calciteicon||"",a=this._isReport?"ba-accordion-report-checkbox ba-target-content":"ba-target-content";function l(e){return e?"ba-accordion-report-item":"ba-accordion-report-item-single"}return(0,i.h)("calcite-accordion",{appearance:"solid","icon-position":"end"},(0,i.h)("calcite-accordion-item",{style:{"margin-left":"0px"},icon:c,scale:"s","item-title":o},t?t.map((({id:t,name:o,subText:h,usesCheckbox:d,isChecked:p})=>(0,i.h)("div",{style:r},e.generateCheckbox(t,d,p,a),(0,i.h)("calcite-list-item",{style:s,class:l(d),label:o,data:t,description:h||"",onClick:i=>e.onClickAccordionItem(i,e,{id:t,name:o})},(0,i.h)("calcite-icon",{style:n,icon:c,scale:"s",slot:"content-start"}))))):""))}get el(){return(0,i.g)(this)}static get watchers(){return{content:["onContentChanged"],displayname:["onAccordionTextChanged"],groupid:["onGroupIdChanged"],contentInline:["onContentInlineChanged"],showcheckbox:["accordionCheckboxChanged"]}}};c.style=".ba-accordion{position:relative;width:100%;min-height:24px;max-width:500px;overflow:hidden;color:#333;background-color:#f3efef;padding-bottom:3px;border-bottom:2px solid #d9d9d9}.ba-dark{background-color:#0D0F2E;color:#fefefe}.ba-accordion-abs{position:absolute}.ba-accordion-check{width:100%;min-height:36px;max-width:500px;overflow:hidden;color:#333;background-color:#f3efef;padding-bottom:3px;border-bottom:2px solid #d9d9d9}.accordion__intro{position:relative;top:2px;left:6px;height:24px;cursor:pointer;display:flex}.accordion__intro-check{position:relative;top:2px;left:6px;height:24px;cursor:pointer;display:flex}.accordion__intro h4{flex:1}.ba-accordion-h4-check{position:relative;left:-9px;top:3px}.accordion__content{padding:0 20px;max-height:0;overflow:hidden;will-change:max-height;color:#333;opacity:0;position:absolute;top:29px;left:12px;min-width:calc(100% - 20px);transition:max-height 0.25s ease-out}.ba-accordion h4,.ba-accordion p{margin:0;line-height:1;font-size:10pt}.ba-accordion h4{color:#303030;font-size:10pt;font-weight:500;display:flex;margin-top:5px;margin-left:6px}.ba-accordion p{color:#333;font-size:18px;margin:0;margin-left:16px}.accordion__active .accordion__content{max-height:100%;padding:0px 8px 3px 0px;opacity:1;background-color:#f5f3f3;z-index:999999}.accordion-content-stabilized{overflow:auto}.ba-accordion-icon{position:absolute;top:0px;right:20px;font-size:20px;width:32px;height:26px}.ba-accordion-icon-check{position:absolute;top:0px;right:2px;font-size:20px;width:32px;height:25px}.ba-accordion-subtext{font-size:8.5pt;width:calc(100% - 40px);word-wrap:break-word}.ba-accordion-ul{list-style-type:none;padding:0 2px 4px 6px;margin-block-start:0;margin-block-end:0}.ba-accordion-list-item:hover{background-color:#dddddd}.ba-accordion-list-item{position:relative;min-height:36px;min-width:220px;width:calc(100% - 20px);border-bottom:1px solid rgb(187, 187, 187);background-color:white;padding-left:40px;padding-top:4px}.ba-accordion-list-item-no-img{padding-left:12px}.ba-accordion-title{font-size:9pt;width:calc(100% - 40px)}.ba-pin-up-svg{position:absolute;top:5px;left:9px;transform:scale(0.9)}.ba-pin-down-svg{position:absolute;top:8px;left:9px}.ba-check-on-svg{position:absolute;top:7px;left:9px;transform:scale(0.9)}.ba-check-off-svg{transform:scale(0.52);position:relative;top:-1px;left:1px}.ba-accordion-item-target{position:relative;top:-6px;left:-6px;width:36px;height:32px;z-index:1;}.ba-accordion-subtext{font-size:8.5pt;color:rgb(54 54 54);margin-top:3px}.ba-accordion-item-pin-up{position:absolute;width:32px;height:32px;right:0;top:16px}.ba-accordion-item-pin-down{position:absolute;width:32px;height:32px;right:0;top:16px}.ba-accordion-item-checkbox-checked,.ba-accordion-item-checkbox-unchecked{position:absolute;top:1px;left:1px;width:30px;height:30px;padding:10px}.ba-content-hidden,.ba-accordion-item-hidden{display:none}.ba-accordion-title-alone{font-size:9pt;font-family:sans-serif;margin-top:12px;padding-bottom:12px;width:calc(100% - 36px)}.accordion-content-inline{position:relative;top:6px;left:8px}button.ba-accordion-icon-check{background-color:#404040;color:#fff;border:none;padding:0.6rem 1rem;margin:0 0.2rem;outline-color:transparent;transition:outline-color 150ms}.ba-dark{background-color:#2b2b2b !important;color:#fefefe !important}.ba-dark-item{background-color:#464646 !important;color:#fefefe !important}.ba-dark-item-selected{background-color:#363636 !important;color:#fefefe !important}calcite-checkbox{position:relative;top:24px;left:12px}calcite-accordion-item{margin-left:30px}.ba-accordion-report-checkbox{position:absolute !important;top:8px !important;left:2px !important}.ba-accordion-report-item{margin-left:28px;width:calc(100% - 28px)}.ba-accordion-report-item-single{margin-left:6px;width:calc(100% - 6px)}"}}]);