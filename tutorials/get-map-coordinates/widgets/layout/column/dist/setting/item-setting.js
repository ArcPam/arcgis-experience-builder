define(["jimu-core","jimu-ui","jimu-ui/setting-components","jimu-layouts/common","jimu-layouts/layout-builder","jimu-ui/style-setting-components"],(function(t,e,o,n,i,a){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=604)}({10:function(t,e){t.exports=n},15:function(t,e){t.exports=i},18:function(t,e){t.exports=a},3:function(e,o){e.exports=t},4:function(t,o){t.exports=e},604:function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var a=o(3),s=o(7),u=o(4),r=o(10),l=o(15),p=o(18),d={width:110},c=[u.UnitTypes.PIXEL,u.UnitTypes.PERCENTAGE];var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateBBox=function(t,o){var n=e.props.layoutItem.bbox,i={};i[t]=""+o.distance+o.unit,e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},a.lodash.assign({},n,i))},e.updateAutoSetting=function(t,o){var n,i=e.props.layoutItem.setting||a.Immutable({});i=i.setIn(["autoProps",t],o);var s=a.Immutable(e.props.layoutItem.bbox),u=parseFloat(null===(n=s)||void 0===n?void 0:n.height);if(!o&&isNaN(u)){var r=e.getSizeOfItem();r&&e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},s.set("height",r.height))}e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},i)},e.updateAlignSelf=function(t){var o=e.props.layoutItem.setting||a.Immutable({});o=o.setIn(["style","alignSelf"],t.target.value),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o)},e.updateHeightMode=function(t){var o=e.props.layoutItem.setting||a.Immutable({}),n=t.target.value;if(o=o.set("heightMode",n),"ratio"===n){var i=e.getSizeOfItem();i&&(o=o.set("aspectRatio",Number((i.height/i.width).toFixed(2))))}e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o)},e.updateAspectRatio=function(t){var o=e.props.layoutItem.setting||a.Immutable({});o=o.set("aspectRatio",t),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o)},e.formatMessage=function(t){return e.props.formatMessage(t)},e}return i(e,t),e.prototype.getSizeOfItem=function(){var t=this.props,e=t.layoutId,o=t.layoutItem,n=this.querySelector('div.exb-rnd[data-layoutid="'+e+'"][data-layoutitemid="'+o.id+'"]');return n?n.getBoundingClientRect():null},e.prototype.querySelector=function(t){var e=document.querySelector('iframe[name="'+a.APP_FRAME_NAME_IN_BUILDER+'"]');return e?(e.contentDocument||e.contentWindow.document).querySelector(t):null},e.prototype.render=function(){var t,e,o,n,i,f,y,g=this,m=this.props,h=m.layoutId,I=m.layoutItem,x=m.isLockLayout;if(!I)return null;var v,S=I.setting||{},j=S.style||{},b=I.bbox||{},M=null==(e=null===(t=S.autoProps)||void 0===t?void 0:t.width)||e,C=null!=(n=null===(o=S.autoProps)||void 0===o?void 0:o.height)&&n,P=null!=(i=S.heightMode)?i:"fixed";return a.jsx("div",{className:"column-item-setting"},!x&&a.jsx(a.React.Fragment,null,a.jsx(s.SettingSection,{title:this.formatMessage("size")},a.jsx(s.SettingRow,{label:a.jsx(u.Label,{check:!0,className:"justify-content-start align-items-center"},this.formatMessage("width"))},a.jsx(s.SizeModeSelector,{mode:M?s.SizeMode.Auto:s.SizeMode.Custom,onChange:function(t){return g.updateAutoSetting("width",t===s.SizeMode.Auto)}},a.jsx(p.InputUnit,{style:d,disabled:M,units:c,value:(v=null===(f=b)||void 0===f?void 0:f.width,r.isPercentage(v)?{distance:parseFloat(v),unit:u.UnitTypes.PERCENTAGE}:{distance:parseInt(v,10),unit:u.UnitTypes.PIXEL}),onChange:function(t){return g.updateBBox("width",t)}}))),!M&&a.jsx(s.SettingRow,{label:this.formatMessage("align")},a.jsx(u.Select,{value:(y=j.alignSelf,null!=y?y:"flex-start"),onChange:this.updateAlignSelf,style:d},a.jsx("option",{value:"flex-start"},this.formatMessage("start")),a.jsx("option",{value:"flex-end"},this.formatMessage("end")),a.jsx("option",{value:"center"},this.formatMessage("center")))),a.jsx(s.SettingRow,{label:a.jsx(u.Label,{check:!0,className:"justify-content-start align-items-center"},this.formatMessage("height"))},a.jsx(s.SizeModeSelector,{mode:C?s.SizeMode.Auto:s.SizeMode.Custom,onChange:function(t){return g.updateAutoSetting("height",t===s.SizeMode.Auto)}},a.jsx(u.Select,{value:P,onChange:this.updateHeightMode,style:d,disabled:C},a.jsx("option",{value:"fit"},this.formatMessage("fitToContainer")),a.jsx("option",{value:"fixed"},this.formatMessage("fixed")),a.jsx("option",{value:"ratio"},this.formatMessage("aspectRatio"))))),"ratio"===P&&!C&&a.jsx(s.SettingRow,{label:this.formatMessage("aspectRatio")},a.jsx(p.InputRatio,{style:d,value:S.aspectRatio,onChange:this.updateAspectRatio})),"fixed"===P&&!C&&a.jsx(s.SettingRow,{label:this.formatMessage("height")},a.jsx(p.InputUnit,{style:d,units:c,value:{distance:Math.round(parseFloat(b.height)),unit:u.UnitTypes.PIXEL},onChange:function(t){return g.updateBBox("height",t)}})))),(I.widgetId||I.sectionId)&&a.jsx(l.CommonLayoutItemSetting,{layoutId:h,layoutItemId:I.id,isSection:I.type===a.LayoutItemType.Section,style:this.props.style,onStyleChange:this.props.onStyleChange,formatMessage:this.props.formatMessage}))},e}(a.React.PureComponent);e.default=f},7:function(t,e){t.exports=o}})}));