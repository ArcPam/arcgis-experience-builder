define(["jimu-core","jimu-ui","jimu-layouts/common","jimu-layouts/layout-runtime"],(function(t,e,n,r){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=610)}({10:function(t,e){t.exports=n},181:function(t,e,n){"use strict";var r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(3),s=n(41);e.ROW_STYLE=i.css(o||(o=r(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n\n  .offset-1 {\n    margin-left: 8.33333%;\n    margin-right: 0;\n  }\n  .offset-2 {\n    margin-left: 16.66667%;\n    margin-right: 0;\n  }\n  .offset-3 {\n    margin-left: 25%;\n    margin-right: 0;\n  }\n  .offset-4 {\n    margin-left: 33.33333%;\n    margin-right: 0;\n  }\n  .offset-5 {\n    margin-left: 41.66667%;\n    margin-right: 0;\n  }\n  .offset-6 {\n    margin-left: 50%;\n    margin-right: 0;\n  }\n  .offset-7 {\n    margin-left: 58.33333%;\n    margin-right: 0;\n  }\n  .offset-8 {\n    margin-left: 66.66667%;\n    margin-right: 0;\n  }\n  .offset-9 {\n    margin-left: 75%;\n    margin-right: 0;\n  }\n  .offset-10 {\n    margin-left: 83.33333%;\n    margin-right: 0;\n  }\n  .offset-11 {\n    margin-left: 91.66667%;\n    margin-right: 0;\n  }\n"],["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n\n  .offset-1 {\n    margin-left: 8.33333%;\n    margin-right: 0;\n  }\n  .offset-2 {\n    margin-left: 16.66667%;\n    margin-right: 0;\n  }\n  .offset-3 {\n    margin-left: 25%;\n    margin-right: 0;\n  }\n  .offset-4 {\n    margin-left: 33.33333%;\n    margin-right: 0;\n  }\n  .offset-5 {\n    margin-left: 41.66667%;\n    margin-right: 0;\n  }\n  .offset-6 {\n    margin-left: 50%;\n    margin-right: 0;\n  }\n  .offset-7 {\n    margin-left: 58.33333%;\n    margin-right: 0;\n  }\n  .offset-8 {\n    margin-left: 66.66667%;\n    margin-right: 0;\n  }\n  .offset-9 {\n    margin-left: 75%;\n    margin-right: 0;\n  }\n  .offset-10 {\n    margin-left: 83.33333%;\n    margin-right: 0;\n  }\n  .offset-11 {\n    margin-left: 91.66667%;\n    margin-right: 0;\n  }\n"]))),e.flipRowItemPos=function(t){return i.Immutable(t).set("left",s.TOTAL_COLS-parseInt(t.left,10)-parseInt(t.width,10))}},20:function(t,e){t.exports=r},3:function(e,n){e.exports=t},4:function(t,n){t.exports=e},41:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MIN_SPAN=2,e.TOTAL_COLS=12},59:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=n(4);e.defaultConfig=r.Immutable({space:20,style:{padding:{number:[10],unit:o.UnitTypes.PIXEL}}}),e.DEFAULT_ROW_ITEM_SETTING={heightMode:"fixed",aspectRatio:1,offsetX:0,offsetY:0,style:{alignSelf:"flex-start"}}},610:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var l,f=n(3),u=n(611),c=n(4),p=n(612),d=n(615),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.props,e=t.layouts,n=t.id,r=t.intl,o=t.builderSupportModules,h=a(t,["layouts","id","intl","builderSupportModules"]),g=window.jimuConfig.isInBuilder?o.widgetModules.RowLayoutBuilder:p.default;return g?f.jsx("div",{className:"widget-row-layout d-flex justify-content-center d-flex w-100",css:f.css(l||(l=i(["height: 100%;"],["height: 100%;"])))},f.jsx(g,s({layouts:e[f.DEFAULT_EMBED_LAYOUT_NAME],widgetId:n,config:this.props.config},h),f.jsx(c.WidgetPlaceholder,{icon:d,widgetId:n,style:{border:"none",pointerEvents:"none"},message:r.formatMessage({id:"tips",defaultMessage:u.default.tips})}))):f.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},"No layout component!")},e}(f.BaseWidget);e.default=h},611:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={_widgetLabel:"Row",widgetProperties:"Widget properties",widgetFunctions:"Widget functions",widgetName:"widget name:",widgetProps:"widget properties:",tips:"Row"}},612:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,l=n(3),f=n(4),u=n(613),c=n(10),p=n(41),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onResize=function(t,n){e.browserSizeMode===e.mainSizeMode&&(t||n)&&l.getAppStore().dispatch(l.appActions.widgetStatePropChange(e.props.widgetId,"height",n))},e}return o(e,t),e.prototype.findExtension=function(){var t,e=l.ExtensionManager.getInstance().getExtensions(""+l.extensionSpec.ExtensionPoints.LayoutTransformer);if(e&&e.length>0){var n=e.find((function(t){return"ROW"===t.layoutType}));this.layoutTransform=null===(t=n)||void 0===t?void 0:t.transformLayout}},e.prototype.collectRowItems=function(){var t=this.props,e=t.layout,n=t.layouts;this.layoutTransform||this.findExtension();var r=e;n[this.browserSizeMode]!==e.id&&this.layoutTransform&&(r=this.layoutTransform(e,this.mainSizeMode,this.browserSizeMode)),this.finalLayout=r;var o=r.order||[],i=[],s=[],a=0;return i.push(s),o.forEach((function(t){var e=r.content[t].bbox,n=parseInt(e.left,10),o=Math.floor(n/p.TOTAL_COLS);o>a&&(s=[],a=o,i.push(s)),s.push(t)})),i},e.prototype.createRow=function(){var t=this.props,e=t.layout,n=t.config,r=t.layouts;return l.jsx(u.Row,{layouts:r,layout:e,transformedLayout:this.finalLayout,config:n,theme:this.theme,isMultiRow:this.rows.length>1})},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,r=e.className,o=e.config.style||{},u=s({},f.styleUtils.toCSSStyle(o));return l.jsx(c.PageContext.Consumer,null,(function(e){return t.browserSizeMode=e.browserSizeMode,t.mainSizeMode=e.mainSizeMode,t.theme=e.theme,t.rows=t.collectRowItems(),l.jsx("div",{className:l.classNames("layout d-flex",r),css:l.css(a||(a=i(["\n          width: 100%;\n        "],["\n          width: 100%;\n        "]))),style:u,"data-layoutid":n.id},t.createRow(),l.jsx(l.ReactResizeDetector,{handleHeight:!0,onResize:t.onResize}))}))},e}(l.React.PureComponent);e.default=l.ReactRedux.connect(c.mapStateToLayoutProps)(d)},613:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var s,a,l=n(3),f=n(614),u=n(10),c=n(181),p=function(t){function e(e){var n=t.call(this,e)||this;return n.flipLeftRight=u.isRTL(),n}return o(e,t),e.prototype.collectBounds=function(){var t=this,e=this.props.transformedLayout,n=e.order||[];return this.childRects=[],n.forEach((function(n){var r,o,i=null===(o=null===(r=e.content)||void 0===r?void 0:r[n])||void 0===o?void 0:o.bbox;i&&t.childRects.push({layoutId:e.id,id:n,left:parseInt(i.left,10),width:parseInt(i.width,10),height:parseInt(i.height,10)})})),this.childRects.sort((function(t,e){return t.left-e.left}))},e.prototype.createItem=function(t,e,n){var r,o=this.props,i=o.layout,s=o.config,a=o.isMultiRow,u=t[e],c=s.space||0;if(0===e)r=u.left;else{var p=t[e-1];r=u.left-p.left-p.width}return l.jsx(f.default,{key:u.id,offset:r,span:u.width,isMultiRow:a,layoutId:i.id,layoutItemId:u.id,layoutItem:i.content[u.id],alignItems:n.alignItems,style:{paddingLeft:c/2,paddingRight:c/2}})},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,r=e.className,o=e.config;this.collectBounds();var f=this.childRects,p=o.style||{},d=o.space||0;return l.jsx(u.PageContext.Consumer,null,(function(e){return l.jsx("div",{className:l.classNames("layout",r,{"row-rtl":t.flipLeftRight}),css:c.ROW_STYLE,"data-layoutid":n.id},l.jsx("div",{css:l.css(s||(s=i(["\n            width: 100%;\n            max-width: ",";\n          "],["\n            width: 100%;\n            max-width: ",";\n          "])),e.maxWidth>0?e.maxWidth+"px":"none")},l.jsx("div",{className:l.classNames("row",{"flex-nowrap":!t.props.isMultiRow}),css:l.css(a||(a=i(["\n                position: relative;\n                margin-left: ","px;\n                margin-right: ","px;\n                height: 100%;\n              "],["\n                position: relative;\n                margin-left: ","px;\n                margin-right: ","px;\n                height: 100%;\n              "])),-d/2,-d/2)},f.length>0&&f.map((function(e,n){return t.createItem(f,n,p)})))))}))},e}(l.React.PureComponent);e.Row=p},614:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),a=n(10),l=n(20),f=n(59),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.calHeight=function(t,e){var n,r,o,i,s,a,l,f,u;return this.props.isMultiRow?{height:e.height,alignSelf:(r=null===(n=t.style)||void 0===n?void 0:n.alignSelf,null!=r?r:"flex-start")}:(null===(o=t.autoProps)||void 0===o?void 0:o.height)?{height:"auto",alignSelf:(s=null===(i=t.style)||void 0===i?void 0:i.alignSelf,null!=s?s:"flex-start")}:"ratio"===t.heightMode?{alignSelf:(l=null===(a=t.style)||void 0===a?void 0:a.alignSelf,null!=l?l:"flex-start")}:"fixed"===t.heightMode?{height:e.height,alignSelf:(u=null===(f=t.style)||void 0===f?void 0:f.alignSelf,null!=u?u:"flex-start")}:{alignSelf:"stretch"}},e.prototype.render=function(){var t,e=this.props,n=e.span,r=e.offset,o=e.layoutId,u=e.layoutItem,c=e.style;if(!u||u.isPending)return null;var p=u.bbox,d=s.lodash.assign({},f.DEFAULT_ROW_ITEM_SETTING,u.setting),h=s.classNames("row-layout-item","col-"+n,"offset-"+r),g=i(i({},c),this.calHeight(d,p));(d.offsetX||d.offsetY)&&(g.transform="translate("+(d.offsetX||0)+"px, "+(d.offsetY||0)+"px)");var y=a.parseAspectRatio(d.aspectRatio);return s.jsx(l.LayoutItem,{style:g,className:h,layoutId:o,layoutItemId:u.id,forceAspectRatio:"ratio"===d.heightMode&&!(null===(t=d.autoProps)||void 0===t?void 0:t.height),aspectRatio:y,onClick:this.props.onClick})},e}(s.React.PureComponent);e.default=u},615:function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11 2v13h-1V2H6v13H5V2H1v12a1 1 0 001 1h12a1 1 0 001-1V2h-4zM2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2z"></path></svg>'}})}));